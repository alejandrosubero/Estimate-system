(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{fGMJ:function(t,e,i){"use strict";i.r(e),i.d(e,"ClientModule",function(){return ot});var a=i("ofXK"),n=i("kMz5"),o=i("ADsi"),c=i("tyNb"),r=i("zSib"),s=i("M9IT"),l=i("Dh3D"),d=i("+0xr"),m=i("LvDl"),h=i("0IaG"),u=i("ltNV"),p=i("fXoL"),f=i("dNgK"),b=i("u47x"),g=i("tk/3"),C=i("2Vo4"),w=i("AytR"),v=i("yZ9z");class S{constructor(t,e,i){this.http=t,this.router=e,this.SessionService=i,this.clientList=new C.a(new Array),this.em2=this.clientList.asObservable()}updateClientList(t){this.clientList.next(t)}getMapClients(){const t={headers:new g.d};return this.http.get(w.a.serverUrl+"api/client/map/all",t)}getClients(){const t={headers:new g.d};return this.http.get(w.a.serverUrl+"api/client/active/all",t)}resetAndGetClients(){const t={headers:new g.d};return this.http.get(w.a.serverUrl+"api/client/reset/Clients",t)}}S.\u0275fac=function(t){return new(t||S)(p.vc(g.b),p.vc(c.c),p.vc(v.a))},S.\u0275prov=p.ec({token:S,factory:S.\u0275fac,providedIn:"root"});var y=i("P64T"),D=i("bTqV"),k=i("NFeN"),I=i("kmnG"),M=i("qFsG");function N(t,e){1&t&&(p.oc(0,"th",27),p.bd(1," ID "),p.nc())}function A(t,e){if(1&t&&(p.oc(0,"td",28),p.bd(1),p.nc()),2&t){const t=e.$implicit;p.Vb(1),p.dd(" ",t.idClient," ")}}function O(t,e){1&t&&(p.oc(0,"th",29),p.bd(1," From "),p.nc())}function P(t,e){if(1&t&&(p.oc(0,"td",30),p.bd(1),p.nc()),2&t){const t=e.$implicit;p.Vb(1),p.dd(" ",t.from," ")}}function x(t,e){1&t&&(p.oc(0,"th",31),p.bd(1," FullName "),p.nc())}function _(t,e){if(1&t&&(p.oc(0,"td",28),p.bd(1),p.nc()),2&t){const t=e.$implicit;p.Vb(1),p.dd(" ",t.fullName," ")}}function R(t,e){1&t&&(p.oc(0,"th",32),p.bd(1," ZipCode "),p.nc())}function V(t,e){if(1&t&&(p.oc(0,"td",28),p.bd(1),p.nc()),2&t){const t=e.$implicit;p.Vb(1),p.dd(" ",t.zipCode," ")}}function F(t,e){1&t&&(p.oc(0,"th",32),p.bd(1," Phone Number "),p.nc())}function T(t,e){if(1&t&&(p.oc(0,"td",33),p.bd(1),p.nc()),2&t){const t=e.$implicit;p.Vb(1),p.dd(" ",t.phoneNumbers[0].number," ")}}function Z(t,e){1&t&&p.jc(0,"tr",34)}function z(t,e){if(1&t){const t=p.pc();p.oc(0,"tr",35),p.yc("click",function(){p.Tc(t);const i=e.$implicit;return p.Cc().onNavegateToDetail(i)}),p.nc()}}function E(t,e){if(1&t&&(p.oc(0,"tr",36),p.oc(1,"td",37),p.bd(2),p.nc(),p.nc()),2&t){p.Cc();const t=p.Rc(15);p.Vb(2),p.dd('No data matching the filter "',t.value,'"')}}const L=function(){return[5,10,25,100]};class ${constructor(t,e,i,a,n,o,c,r){this.snackBar=t,this._liveAnnouncer=e,this.clientService=i,this.router=a,this.coreService=n,this.dialog=o,this.dialogRef=c,this.data=r,this.displayedColumns=["idClient","from","fullName","zipCode","phoneNumber"],this.dataSource2=new d.l,this.dataListClient2=new Array,this.title="Estimates And Invoices Associated To Client",this.addressMapping=new Map,null!=r.list&&void 0!==r.list&&(this.dataListClient2=this.setFrom(r.list),this.dataSource2.data=this.dataListClient2,this.title=`${this.title}: ${r.title2} address: ${r.title1}.`)}setFrom(t){return t.forEach(t=>{null!=t.workId&&void 0!==t.workId&&(t.from="Invoice"),null!=t.estimateId&&void 0!==t.estimateId&&(t.from="Estimate")}),t}ngOnChanges(t){this.dataSource2.paginator=this.paginator,this.dataSource2.sort=this.sort}ngAfterViewInit(){this.dataSource2.paginator=this.paginator,this.dataSource2.sort=this.sort}ngOnInit(){}onSelltings(){this.dialogRef.close()}applyFilter(t){const e=t.target.value;this.dataSource2.filter=e.trim().toLowerCase()}onNavegateToDetail(t){if(void 0===t.estimateId||null==t.estimateId||void 0===t.workId||null==t.workId){if(void 0===t.estimateId||null===t.estimateId||void 0!==t.workId&&null!=t.workId||this.navegateToEstimate(t),void 0!==t.estimateId&&null!=t.estimateId||void 0===t.workId||null===t.workId||this.onNavegateToInvoice(t),!(void 0!==t.estimateId&&null!=t.estimateId||void 0!==t.workId&&null!=t.workId)){const t='"the selected item is not associated with an Estimate or an Invoice"';this.openSnackBar(t,"Close")}}else{const e="Select one to view";this.notification("select View",e,"Invoice","Estimate",t)}}navegateToEstimate(t){this.router.navigate(["/jshandy-man-services/menu/estimate/edid-and-detail"],{queryParams:{id:t.estimateId}}),this.dialogRef.close()}onNavegateToInvoice(t){this.router.navigate(["/jshandy-man-services/menu/invoice/edid-and-detail"],{queryParams:{id:t.workId}}),this.dialogRef.close()}notification(t,e,i,a,n){const o=new h.d;o.disableClose=!0,o.autoFocus=!0,o.width="45%",o.height="auto",o.data={title:t,msg:e,cancel:i,confirm:a};this.dialog.open(u.a,o).afterClosed().subscribe(t=>{t?this.navegateToEstimate(n):this.onNavegateToInvoice(n)})}openSnackBar(t,e){this.snackBar.open(t,e)}announceSortChange(t){t.direction?this._liveAnnouncer.announce(`Sorted ${t.direction}ending`):this._liveAnnouncer.announce("Sorting cleared")}filterForselection(t,e){return m.differenceWith(t,e,m.isEqual)}applyDateFilter(){this.dataSource2.data=this.dataListClient2}}function W(t,e){1&t&&(p.oc(0,"th",24),p.bd(1," ID "),p.nc())}function j(t,e){if(1&t&&(p.oc(0,"td",25),p.bd(1),p.nc()),2&t){const t=e.$implicit;p.Vb(1),p.dd(" ",t.idClient," ")}}function H(t,e){1&t&&(p.oc(0,"th",26),p.bd(1," FullName "),p.nc())}function J(t,e){if(1&t&&(p.oc(0,"td",25),p.bd(1),p.nc()),2&t){const t=e.$implicit;p.Vb(1),p.dd(" ",t.fullName," ")}}function B(t,e){1&t&&(p.oc(0,"th",27),p.bd(1," ZipCode "),p.nc())}function q(t,e){if(1&t&&(p.oc(0,"td",25),p.bd(1),p.nc()),2&t){const t=e.$implicit;p.Vb(1),p.dd(" ",t.zipCode," ")}}function G(t,e){1&t&&(p.oc(0,"th",27),p.bd(1," Address "),p.nc())}function Q(t,e){if(1&t&&(p.oc(0,"td",28),p.bd(1),p.nc()),2&t){const t=e.$implicit;p.Vb(1),p.dd(" ",t.address," ")}}function U(t,e){1&t&&(p.oc(0,"th",27),p.bd(1," Phone Number "),p.nc())}function K(t,e){if(1&t&&(p.oc(0,"td",29),p.bd(1),p.nc()),2&t){const t=e.$implicit;p.Vb(1),p.dd(" ",t.phoneNumbers[0].number," ")}}function X(t,e){1&t&&p.jc(0,"tr",30)}function Y(t,e){if(1&t){const t=p.pc();p.oc(0,"tr",31),p.yc("click",function(){p.Tc(t);const i=e.$implicit;return p.Cc().onNavegateToDetail(i)}),p.nc()}}function tt(t,e){if(1&t&&(p.oc(0,"tr",32),p.oc(1,"td",33),p.bd(2),p.nc(),p.nc()),2&t){p.Cc();const t=p.Rc(12);p.Vb(2),p.dd('No data matching the filter "',t.value,'"')}}$.\u0275fac=function(t){return new(t||$)(p.ic(f.a),p.ic(b.k),p.ic(S),p.ic(c.c),p.ic(y.a),p.ic(h.b),p.ic(h.g),p.ic(h.a))},$.\u0275cmp=p.cc({type:$,selectors:[["app-client-detail"]],viewQuery:function(t,e){if(1&t&&(p.fd(l.a,3),p.fd(s.a,3)),2&t){let t;p.Qc(t=p.zc())&&(e.sort=t.first),p.Qc(t=p.zc())&&(e.paginator=t.first)}},features:[p.Tb],decls:37,vars:6,consts:[[1,"topeSeparation"],[1,"example-button-row"],[1,"example-flex-container"],["mat-icon-button","","aria-label","vertical three dot icon",3,"click"],[1,"h4","text-center","font-weight-light","p-1","textTitle","mb-2"],[1,"container-fluid"],["appearance","standard"],["matInput","","placeholder","Ex. Mia",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource","matSortChange"],["matColumnDef","idClient"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by ID",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","from"],["mat-header-cell","","mat-sort-header","","sortActionDescription","from data",4,"matHeaderCellDef"],["mat-cell","","style","font-size: 12px; font-weight: 800;",4,"matCellDef"],["matColumnDef","fullName"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by Name",4,"matHeaderCellDef"],["matColumnDef","zipCode"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by Total Cost",4,"matHeaderCellDef"],["matColumnDef","phoneNumber"],["mat-cell","","style","font-size: 12px;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by ID"],["mat-cell",""],["mat-header-cell","","mat-sort-header","","sortActionDescription","from data"],["mat-cell","",2,"font-size","12px","font-weight","800"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by Name"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by Total Cost"],["mat-cell","",2,"font-size","12px"],["mat-header-row",""],["mat-row","",3,"click"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(t,e){1&t&&(p.oc(0,"div",0),p.oc(1,"section"),p.oc(2,"div",1),p.oc(3,"div",2),p.oc(4,"button",3),p.yc("click",function(){return e.onSelltings()}),p.oc(5,"mat-icon"),p.bd(6,"arrow_back_ios"),p.nc(),p.nc(),p.nc(),p.nc(),p.nc(),p.oc(7,"div",4),p.bd(8),p.nc(),p.jc(9,"br"),p.oc(10,"div",5),p.oc(11,"mat-form-field",6),p.oc(12,"mat-label"),p.bd(13,"Filter"),p.nc(),p.oc(14,"input",7,8),p.yc("keyup",function(t){return e.applyFilter(t)}),p.nc(),p.nc(),p.oc(16,"div",9),p.oc(17,"table",10),p.yc("matSortChange",function(t){return e.announceSortChange(t)}),p.mc(18,11),p.Zc(19,N,2,0,"th",12),p.Zc(20,A,2,1,"td",13),p.lc(),p.mc(21,14),p.Zc(22,O,2,0,"th",15),p.Zc(23,P,2,1,"td",16),p.lc(),p.mc(24,17),p.Zc(25,x,2,0,"th",18),p.Zc(26,_,2,1,"td",13),p.lc(),p.mc(27,19),p.Zc(28,R,2,0,"th",20),p.Zc(29,V,2,1,"td",13),p.lc(),p.mc(30,21),p.Zc(31,F,2,0,"th",20),p.Zc(32,T,2,1,"td",22),p.lc(),p.Zc(33,Z,1,0,"tr",23),p.Zc(34,z,1,0,"tr",24),p.Zc(35,E,3,1,"tr",25),p.nc(),p.jc(36,"mat-paginator",26),p.nc(),p.nc(),p.nc()),2&t&&(p.Vb(8),p.cd(e.title),p.Vb(9),p.Jc("dataSource",e.dataSource2),p.Vb(16),p.Jc("matHeaderRowDef",e.displayedColumns),p.Vb(1),p.Jc("matRowDefColumns",e.displayedColumns),p.Vb(2),p.Jc("pageSizeOptions",p.Mc(5,L)))},directives:[D.a,k.a,I.c,I.g,M.b,d.k,l.a,d.c,d.e,d.b,d.g,d.j,d.h,s.a,d.d,l.b,d.a,d.f,d.i],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-column-id[_ngcontent-%COMP%]{Word-wrap:break-Word!important;white-space:unset!important;flex:0 0 15%!important;width:10%!important;margin:0 0 0 10px;overflow-wrap:break-Word;Word-wrap:break-Word;Word-break:break-Word;-webkit-hyphens:auto;hyphens:auto}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:25%}.ex-button-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .ex-button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:8px}.cleanFlow[_ngcontent-%COMP%]{overflow:hidden}.flowRight[_ngcontent-%COMP%]{float:right}"]});const et=function(){return[5,10,25,100]};class it{constructor(t,e,i,a,n,o){this.snackBar=t,this._liveAnnouncer=e,this.clientService=i,this.router=a,this.coreService=n,this.dialog=o,this.displayedColumns=["idClient","fullName","zipCode","address","phoneNumber"],this.dataSource2=new d.l,this.dataListClient2=new Array,this.title="Clients",this.addressMapping=new Map,this.onGetData2()}ngOnChanges(t){this.dataSource2.paginator=this.paginator,this.dataSource2.sort=this.sort}ngAfterViewInit(){this.dataSource2.paginator=this.paginator,this.dataSource2.sort=this.sort}ngOnInit(){this.clientService.em2.subscribe(t=>{this.dataListClient2=t,this.dataSource2.data=this.dataListClient2})}onGetData2(){let t=new Array;this.clientService.getClients().subscribe(e=>{console.log("responseFromClient",e),t=this.filterDuplicateClient(e.entidades),this.clientService.updateClientList(t)},t=>{this.snackBar.open("FAILL THE RESPONSE OFF SERVER","Cerrar")})}filterDuplicateClient(t){this.addressMapping.clear();let e=new Array,i={};return e=t.filter(t=>!i[t.address]&&(i[t.address]=!0)),this.fillMapClient(t,e),console.log(e),e}fillMapClient(t,e){t.forEach(t=>{e.forEach(e=>{if(t.address===e.address)if(this.addressMapping.has(e.address))this.addressMapping.get(e.address).push(t);else{let i=new Array;i.push(t),this.addressMapping.set(e.address,i)}})})}onResetData(){let t=new Array;this.clientService.resetAndGetClients().subscribe(e=>{t=this.filterDuplicateClient(e.entidades),this.clientService.updateClientList(t)},t=>{this.snackBar.open("FAILL THE RESPONSE OFF SERVER","Cerrar")})}announceSortChange(t){t.direction?this._liveAnnouncer.announce(`Sorted ${t.direction}ending`):this._liveAnnouncer.announce("Sorting cleared")}showClientDetail(t,e,i){const a=new h.d;a.disableClose=!0,a.autoFocus=!0,a.width="90%",a.height="auto",a.data={list:t,title1:e,title2:i};this.dialog.open($,a).afterClosed().subscribe(t=>{})}onNavegateToDetail(t){let e=this.addressMapping.get(t.address);e.length>0&&this.showClientDetail(e,t.address,t.name)}navegateToEstimate(t){this.router.navigate(["/jshandy-man-services/menu/estimate/edid-and-detail"],{queryParams:{id:t.estimateId}})}onNavegateToInvoice(t){this.router.navigate(["/jshandy-man-services/menu/invoice/edid-and-detail"],{queryParams:{id:t.workId}})}notification(t,e,i,a,n){const o=new h.d;o.disableClose=!0,o.autoFocus=!0,o.width="45%",o.height="auto",o.data={title:t,msg:e,cancel:i,confirm:a};this.dialog.open(u.a,o).afterClosed().subscribe(t=>{t?this.navegateToEstimate(n):this.onNavegateToInvoice(n)})}openSnackBar(t,e){this.snackBar.open(t,e)}onCreateNewEstimate(){this.router.navigateByUrl("/jshandy-man-services/menu/estimate/edid-and-detail")}applyFilter(t){const e=t.target.value;this.dataSource2.filter=e.trim().toLowerCase()}filterForselection(t,e){return m.differenceWith(t,e,m.isEqual)}applyDateFilter(){this.dataSource2.data=this.dataListClient2}}it.\u0275fac=function(t){return new(t||it)(p.ic(f.a),p.ic(b.k),p.ic(S),p.ic(c.c),p.ic(y.a),p.ic(h.b))},it.\u0275cmp=p.cc({type:it,selectors:[["app-clients"]],viewQuery:function(t,e){if(1&t&&(p.fd(l.a,3),p.fd(s.a,3)),2&t){let t;p.Qc(t=p.zc())&&(e.sort=t.first),p.Qc(t=p.zc())&&(e.paginator=t.first)}},features:[p.Tb],decls:34,vars:6,consts:[[1,"topeSeparation"],["for","title",1,"m-1","h3"],[1,"ex-button-row","mb-1","mt-1","flowRight"],["mat-fab","","color","primary",2,"font-size","8px",3,"click"],["appearance","standard"],["matInput","","placeholder","Ex. Mia",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource","matSortChange"],["matColumnDef","idClient"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by ID",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","fullName"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by Name",4,"matHeaderCellDef"],["matColumnDef","zipCode"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by Total Cost",4,"matHeaderCellDef"],["matColumnDef","address"],["mat-cell","","style","text-align: start;",4,"matCellDef"],["matColumnDef","phoneNumber"],["mat-cell","","style","font-size: 12px;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by ID"],["mat-cell",""],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by Name"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by Total Cost"],["mat-cell","",2,"text-align","start"],["mat-cell","",2,"font-size","12px"],["mat-header-row",""],["mat-row","",3,"click"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(t,e){1&t&&(p.oc(0,"div",0),p.oc(1,"header"),p.oc(2,"label",1),p.bd(3),p.nc(),p.nc(),p.oc(4,"div",2),p.oc(5,"button",3),p.yc("click",function(){return e.onResetData()}),p.bd(6," All Client's"),p.nc(),p.nc(),p.jc(7,"br"),p.oc(8,"mat-form-field",4),p.oc(9,"mat-label"),p.bd(10,"Filter"),p.nc(),p.oc(11,"input",5,6),p.yc("keyup",function(t){return e.applyFilter(t)}),p.nc(),p.nc(),p.oc(13,"div",7),p.oc(14,"table",8),p.yc("matSortChange",function(t){return e.announceSortChange(t)}),p.mc(15,9),p.Zc(16,W,2,0,"th",10),p.Zc(17,j,2,1,"td",11),p.lc(),p.mc(18,12),p.Zc(19,H,2,0,"th",13),p.Zc(20,J,2,1,"td",11),p.lc(),p.mc(21,14),p.Zc(22,B,2,0,"th",15),p.Zc(23,q,2,1,"td",11),p.lc(),p.mc(24,16),p.Zc(25,G,2,0,"th",15),p.Zc(26,Q,2,1,"td",17),p.lc(),p.mc(27,18),p.Zc(28,U,2,0,"th",15),p.Zc(29,K,2,1,"td",19),p.lc(),p.Zc(30,X,1,0,"tr",20),p.Zc(31,Y,1,0,"tr",21),p.Zc(32,tt,3,1,"tr",22),p.nc(),p.jc(33,"mat-paginator",23),p.nc(),p.nc()),2&t&&(p.Vb(3),p.cd(e.title),p.Vb(11),p.Jc("dataSource",e.dataSource2),p.Vb(16),p.Jc("matHeaderRowDef",e.displayedColumns),p.Vb(1),p.Jc("matRowDefColumns",e.displayedColumns),p.Vb(2),p.Jc("pageSizeOptions",p.Mc(5,et)))},directives:[D.a,I.c,I.g,M.b,d.k,l.a,d.c,d.e,d.b,d.g,d.j,d.h,s.a,d.d,l.b,d.a,d.f,d.i],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-column-id[_ngcontent-%COMP%]{flex:0 0 15%!important;width:10%!important;margin:0 0 0 10px;Word-break:break-Word}.mat-column-address[_ngcontent-%COMP%], .mat-column-id[_ngcontent-%COMP%]{Word-wrap:break-Word!important;white-space:unset!important;overflow-wrap:break-Word;Word-wrap:break-Word;-webkit-hyphens:auto;hyphens:auto}.mat-column-address[_ngcontent-%COMP%]{flex:0 0 10%!important;width:100%!important;margin:0}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:25%}.ex-button-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .ex-button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:8px}.cleanFlow[_ngcontent-%COMP%]{overflow:hidden}.flowRight[_ngcontent-%COMP%]{float:right}"]});const at=[{path:"client-list",component:it,canActivate:[r.a]}];class nt{}nt.\u0275fac=function(t){return new(t||nt)},nt.\u0275mod=p.gc({type:nt}),nt.\u0275inj=p.fc({imports:[[c.e.forChild(at)],c.e]});class ot{}ot.\u0275fac=function(t){return new(t||ot)},ot.\u0275mod=p.gc({type:ot}),ot.\u0275inj=p.fc({providers:[r.a],imports:[[a.c,n.a,o.a,nt]]})}}]);