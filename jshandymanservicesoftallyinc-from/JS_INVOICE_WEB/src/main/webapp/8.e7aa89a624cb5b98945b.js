(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{SiN7:function(t,e,i){"use strict";i.r(e),i.d(e,"EstimateModule",function(){return ie});var o=i("ofXK"),n=i("kMz5"),c=i("ADsi"),a=i("tyNb"),s=i("zSib"),r=i("3Pt+"),l=i("0IaG"),d=i("bJE5"),h=i("qmPo"),u=i("UMzN"),m=i("RbhS"),b=i("qBFp"),p=i("ZaaN"),f=i("r9Q/"),v=i("5hrT"),g=i("kHcE"),C=i("Ibmz"),w=i("j8Vv"),x=i("ltNV"),y=i("hZln"),T=i("gjWC"),E=i("PRsa"),V=i("cAkE"),S=i("fXoL"),k=i("Pswi"),D=i("P64T"),O=i("dNgK"),P=i("yZ9z"),A=i("6gb7"),M=i("wZkO"),I=i("Qu3c"),J=i("NFeN"),W=i("bTqV"),F=i("STbY"),_=i("kmnG"),N=i("qFsG"),j=i("iadO"),Z=i("XoJ8");function L(t,e){if(1&t&&(S.oc(0,"div"),S.oc(1,"div",26),S.bd(2),S.nc(),S.nc()),2&t){const t=S.Cc();S.Vb(2),S.ed("",t.estimateView.client.name," ",t.estimateView.client.lastName,"")}}function z(t,e){if(1&t&&(S.oc(0,"div"),S.oc(1,"div",26),S.bd(2),S.nc(),S.nc()),2&t){const t=S.Cc();S.Vb(2),S.cd(t.estimateView.client.fullAdress)}}function $(t,e){if(1&t&&(S.oc(0,"div",26),S.bd(1),S.nc()),2&t){const t=e.$implicit;S.Vb(1),S.dd(" ",t.email," ")}}function B(t,e){if(1&t&&(S.oc(0,"div"),S.Zc(1,$,2,1,"div",58),S.nc()),2&t){const t=S.Cc();S.Vb(1),S.Jc("ngForOf",t.estimateView.client.emails)}}function R(t,e){if(1&t&&(S.oc(0,"div",26),S.bd(1),S.nc()),2&t){const t=e.$implicit;S.Vb(1),S.dd(" ",t.number," ")}}function H(t,e){if(1&t&&(S.oc(0,"div"),S.Zc(1,R,2,1,"div",58),S.nc()),2&t){const t=S.Cc();S.Vb(1),S.Jc("ngForOf",t.estimateView.client.phoneNumbers)}}function q(t,e){1&t&&(S.oc(0,"tr"),S.oc(1,"td",59),S.bd(2," Product and Materials: "),S.nc(),S.nc())}function Q(t,e){if(1&t&&(S.oc(0,"td",66),S.bd(1),S.nc()),2&t){const t=S.Cc().$implicit;S.Jc("ngClass",t.itemDeliteEdit?"tachado":""),S.Vb(1),S.dd(" ",t.description,"")}}function G(t,e){if(1&t&&(S.oc(0,"td",67),S.bd(1),S.nc()),2&t){const t=S.Cc().$implicit;S.Jc("ngClass",t.itemDeliteEdit?"tachado":""),S.Vb(1),S.dd(" ",t.stockNumber,"")}}function U(t,e){if(1&t&&(S.oc(0,"td",67),S.bd(1),S.nc()),2&t){const t=S.Cc().$implicit;S.Jc("ngClass",t.itemDeliteEdit?"tachado":""),S.Vb(1),S.dd(" $",t.totalPriceWithOupTaxes,"")}}function Y(t,e){if(1&t&&(S.oc(0,"td",67),S.bd(1),S.nc()),2&t){const t=S.Cc().$implicit;S.Jc("ngClass",t.itemDeliteEdit?"tachado":""),S.Vb(1),S.dd(" $",t.totalPriceWithTaxes,"")}}function K(t,e){if(1&t&&(S.oc(0,"tr",39),S.Zc(1,Q,2,2,"td",64),S.Zc(2,G,2,2,"td",65),S.Zc(3,U,2,2,"td",65),S.Zc(4,Y,2,2,"td",65),S.nc()),2&t){const t=S.Cc(2);S.Vb(1),S.Jc("ngIf",t.listProduct.length>0),S.Vb(1),S.Jc("ngIf",t.listProduct.length>0),S.Vb(1),S.Jc("ngIf",t.listProduct.length>0),S.Vb(1),S.Jc("ngIf",t.listProduct.length>0)}}function X(t,e){if(1&t&&(S.oc(0,"tr",39),S.oc(1,"td",66),S.bd(2),S.nc(),S.oc(3,"td",67),S.bd(4),S.nc(),S.oc(5,"td",67),S.bd(6),S.nc(),S.oc(7,"td",67),S.bd(8),S.nc(),S.nc()),2&t){const t=e.$implicit,i=S.Cc(2);S.Vb(1),S.Jc("ngClass",t.itemDeliteEdit?"tachado":""),S.Vb(1),S.dd(" ",t.description,""),S.Vb(1),S.Jc("ngClass",t.itemDeliteEdit?"tachado":""),S.Vb(1),S.dd(" ",i.billQuantity,""),S.Vb(1),S.Jc("ngClass",t.itemDeliteEdit?"tachado":""),S.Vb(1),S.dd(" $",t.billTotalWichoutTaxes,""),S.Vb(1),S.Jc("ngClass",t.itemDeliteEdit?"tachado":""),S.Vb(1),S.dd(" $",t.billTotal,"")}}function tt(t,e){if(1&t&&(S.oc(0,"tr"),S.oc(1,"td",32),S.oc(2,"table",33),S.oc(3,"tr",34),S.oc(4,"th",35),S.bd(5," Description "),S.nc(),S.oc(6,"th",36),S.bd(7," Quantity "),S.nc(),S.oc(8,"th",36),S.bd(9," Rate "),S.nc(),S.oc(10,"th",36),S.bd(11," Amount "),S.nc(),S.nc(),S.Zc(12,K,5,4,"tr",60),S.Zc(13,X,9,8,"tr",60),S.oc(14,"tr",39),S.jc(15,"td",40),S.jc(16,"td",61),S.oc(17,"td",62),S.bd(18," Subtotal:"),S.nc(),S.oc(19,"td",63),S.bd(20),S.nc(),S.nc(),S.nc(),S.nc(),S.nc()),2&t){const t=S.Cc();S.Vb(12),S.Jc("ngForOf",t.listProduct),S.Vb(1),S.Jc("ngForOf",t.listbills),S.Vb(7),S.dd(" $",t.coreService.round(t.billLastTotal)," ")}}function et(t,e){1&t&&(S.oc(0,"tr"),S.oc(1,"td",59),S.bd(2," Service: "),S.nc(),S.nc())}function it(t,e){if(1&t&&(S.oc(0,"tr",39),S.oc(1,"td",66),S.bd(2),S.nc(),S.oc(3,"td",67),S.bd(4),S.nc(),S.oc(5,"td",67),S.bd(6),S.nc(),S.oc(7,"td",67),S.bd(8),S.nc(),S.nc()),2&t){const t=e.$implicit,i=S.Cc(2);S.Vb(1),S.Jc("ngClass",t.itemDeliteEdit?"tachado":""),S.Vb(1),S.dd(" ",t.descriptionOfServicesCost,""),S.Vb(1),S.Jc("ngClass",t.itemDeliteEdit?"tachado":""),S.Vb(1),S.dd(" ",i.serviceQuantity,""),S.Vb(1),S.Jc("ngClass",t.itemDeliteEdit?"tachado":""),S.Vb(1),S.dd(" $",t.servicesCost,""),S.Vb(1),S.Jc("ngClass",t.itemDeliteEdit?"tachado":""),S.Vb(1),S.dd(" $",t.servicesCost,"")}}function ot(t,e){if(1&t&&(S.oc(0,"tr"),S.oc(1,"td",32),S.oc(2,"table",33),S.oc(3,"tr",34),S.oc(4,"th",35),S.bd(5," Description "),S.nc(),S.oc(6,"th",36),S.bd(7," Quantity "),S.nc(),S.oc(8,"th",36),S.bd(9," Rate "),S.nc(),S.oc(10,"th",36),S.bd(11," Amount "),S.nc(),S.nc(),S.Zc(12,it,9,8,"tr",60),S.oc(13,"tr",39),S.jc(14,"td",40),S.jc(15,"td",61),S.oc(16,"td",62),S.bd(17," Subtotal:"),S.nc(),S.oc(18,"td",63),S.bd(19),S.nc(),S.nc(),S.nc(),S.nc(),S.nc()),2&t){const t=S.Cc();S.Vb(12),S.Jc("ngForOf",t.estimateView.services),S.Vb(7),S.dd(" $",t.coreService.round(t.servicesTotal)," ")}}function nt(t,e){1&t&&(S.oc(0,"tr"),S.oc(1,"td",59),S.bd(2," SubContractors: "),S.nc(),S.nc())}function ct(t,e){if(1&t&&(S.oc(0,"tr",39),S.oc(1,"td",66),S.bd(2),S.nc(),S.oc(3,"td",67),S.bd(4),S.nc(),S.oc(5,"td",67),S.bd(6),S.nc(),S.oc(7,"td",67),S.bd(8),S.nc(),S.nc()),2&t){const t=e.$implicit,i=S.Cc(2);S.Vb(1),S.Jc("ngClass",t.itemDeliteEdit?"tachado":""),S.Vb(1),S.dd(" ",t.description,""),S.Vb(1),S.Jc("ngClass",t.itemDeliteEdit?"tachado":""),S.Vb(1),S.dd(" ",i.subContractortsQuantity," "),S.Vb(1),S.Jc("ngClass",t.itemDeliteEdit?"tachado":""),S.Vb(1),S.dd(" ",i.coreService.round(t.totalCost-t.profitCalculation),""),S.Vb(1),S.Jc("ngClass",t.itemDeliteEdit?"tachado":""),S.Vb(1),S.dd(" ",i.coreService.round(t.totalCost-t.profitCalculation),"")}}function at(t,e){if(1&t&&(S.oc(0,"tr",39),S.oc(1,"td",40),S.bd(2),S.nc(),S.oc(3,"td",61),S.bd(4),S.nc(),S.oc(5,"td",61),S.bd(6),S.nc(),S.oc(7,"td",61),S.bd(8),S.nc(),S.nc()),2&t){const t=S.Cc(2);S.Vb(2),S.dd(" Profit ",t.profit,"%"),S.Vb(2),S.dd(" ",t.serviceQuantity," "),S.Vb(2),S.dd(" $",t.profitCalculation," "),S.Vb(2),S.dd(" $",t.profitCalculation," ")}}function st(t,e){if(1&t&&(S.oc(0,"tr"),S.oc(1,"td",32),S.oc(2,"table",33),S.oc(3,"tr",34),S.oc(4,"th",35),S.bd(5," Description "),S.nc(),S.oc(6,"th",36),S.bd(7," Quantity "),S.nc(),S.oc(8,"th",36),S.bd(9," Rate "),S.nc(),S.oc(10,"th",36),S.bd(11," Amount "),S.nc(),S.nc(),S.Zc(12,ct,9,8,"tr",60),S.Zc(13,at,9,4,"tr",38),S.oc(14,"tr",39),S.jc(15,"td",40),S.jc(16,"td",61),S.oc(17,"td",62),S.bd(18," Subtotal:"),S.nc(),S.oc(19,"td",63),S.bd(20),S.nc(),S.nc(),S.nc(),S.nc(),S.nc()),2&t){const t=S.Cc();S.Vb(12),S.Jc("ngForOf",t.estimateView.subcontractors),S.Vb(1),S.Jc("ngIf",t.showProfit),S.Vb(7),S.dd(" ",t.coreService.round(t.subcontractorsTotal)," ")}}function rt(t,e){if(1&t&&(S.oc(0,"tr",39),S.oc(1,"td",40),S.bd(2,"Materials and Product "),S.nc(),S.jc(3,"td",68),S.oc(4,"td",68),S.bd(5),S.nc(),S.jc(6,"td",69),S.nc()),2&t){const t=S.Cc();S.Vb(5),S.dd(" $",t.coreService.round(t.billLastTotal),"")}}function lt(t,e){if(1&t&&(S.oc(0,"tr",39),S.oc(1,"td",40),S.bd(2,"Labor Cost Service"),S.nc(),S.jc(3,"td",68),S.oc(4,"td",68),S.bd(5),S.nc(),S.jc(6,"td",69),S.nc()),2&t){const t=S.Cc();S.Vb(5),S.dd("$",t.coreService.round(t.servicesTotal),"")}}function dt(t,e){if(1&t&&(S.oc(0,"tr",39),S.oc(1,"td",40),S.bd(2,"subContractors"),S.nc(),S.jc(3,"td",68),S.oc(4,"td",68),S.bd(5),S.nc(),S.jc(6,"td",69),S.nc()),2&t){const t=S.Cc();S.Vb(5),S.dd("$",t.coreService.round(t.subcontractorsTotal),"")}}function ht(t,e){if(1&t&&(S.oc(0,"tr",39),S.oc(1,"td",40),S.bd(2),S.nc(),S.jc(3,"td",68),S.oc(4,"td",68),S.bd(5),S.nc(),S.jc(6,"td",69),S.nc()),2&t){const t=S.Cc();S.Vb(2),S.dd("Overhead ",t.estimateView.overhead,"%"),S.Vb(3),S.dd("$",t.coreService.round(t.servicesTotalOverhead+t.billTotalOverhead),"")}}class ut{constructor(t){this.coreService=t,this.tipoForm="Estimate",this.for="For:",this.billQuantity=1,this.serviceQuantity=1,this.productQuantity=1,this.subContractortsQuantity=1,this.todayDate=new Date,this.line1=[],this.listbills=new Array,this.listProduct=new Array}ngOnInit(){void 0!==this.estimateView&&null!=this.estimateView&&(this.vistaName="Estimate ",this.todayDate=this.estimateView.createDay,this.showOverhead=!0,this.setSubContractorsProfitCalculationForView(),this.startView())}setSubContractorsProfitCalculationForView(){if(null!=this.estimateView.subcontractors&&void 0!==this.estimateView.subcontractors&&this.estimateView.subcontractors.length>0){let t=0,e=0;this.estimateView.subcontractors.forEach(i=>{e+=i.costOfwork,void 0!==i.billListSubcontractor&&null!=i.billListSubcontractor&&i.billListSubcontractor.length>0&&i.billListSubcontractor.forEach(e=>{t+=e.billTotal});const o=(i.costOfwork+t)*(i.profit/100);i.profitCalculation=this.coreService.round(o)})}}startView(){void 0!==this.estimateView.subcontractors&&null!=this.estimateView.subcontractors&&this.estimateView.subcontractors.length>0&&(this.showProfit=!0),this.fillProductInBillTablet(),this.fillBillTablet()}ngOnChanges(t){this.setSubContractorsProfitCalculationForView(),this.startView()}sedDataClientInView(t){const e=`${this.estimateView.client.name} ${this.estimateView.client.lastName}`;this.nameCliente=` ${e}`,this.addressCliente=` ${this.estimateView.client.fullAdress}`}calculateOverhead(t){let e;return void 0!==this.estimateView.overhead&&null!=this.estimateView.overhead?(e=t*(this.estimateView.overhead/100),e):t}fillProductInBillTablet(){this.listProduct=new Array,this.estimateView.bills.forEach(t=>{this.printProduct&&void 0!==t.productsAndServices&&null!=t.productsAndServices&&t.productsAndServices.length>0&&Array.prototype.push.apply(this.listProduct,t.productsAndServices)})}fillBillTablet(){let t=0,e=0;this.listbills=new Array,this.estimateView.bills.forEach(i=>{this.printProduct||(t+=i.billTotalWichoutTaxes,e+=i.billTotal,this.listbills.push(i)),!i.itemDeliteEdit&&this.printProduct&&void 0!==i.productsAndServices&&null!=i.productsAndServices&&0==i.productsAndServices.length&&(t+=i.billTotalWichoutTaxes,e+=i.billTotal,this.listbills.push(i)),i.itemDeliteEdit&&this.printProduct&&void 0!==i.productsAndServices&&null!=i.productsAndServices&&0==i.productsAndServices.length&&this.listbills.push(i)})}}function mt(t,e){if(1&t){const t=S.pc();S.oc(0,"button",78),S.yc("click",function(){S.Tc(t);const i=e.$implicit;return S.Cc().changueStatus(i)}),S.bd(1),S.nc()}if(2&t){const t=e.$implicit;S.Vb(1),S.dd("",t," ")}}function bt(t,e){1&t&&(S.oc(0,"mat-error"),S.bd(1," the Description is "),S.oc(2,"strong"),S.bd(3,"required"),S.nc(),S.nc())}function pt(t,e){if(1&t){const t=S.pc();S.oc(0,"h6",79),S.oc(1,"span",80),S.bd(2),S.nc(),S.oc(3,"button",81),S.yc("click",function(){S.Tc(t);return S.Cc().onAddNewClient(!1)}),S.oc(4,"mat-icon"),S.bd(5,"add"),S.nc(),S.nc(),S.nc()}if(2&t){const t=S.Cc();S.Vb(2),S.cd(t.newClientTitle)}}function ft(t,e){if(1&t&&(S.oc(0,"div",82),S.oc(1,"div",83),S.oc(2,"label",84),S.oc(3,"span",85),S.bd(4,"Name:"),S.nc(),S.bd(5),S.nc(),S.nc(),S.oc(6,"div",83),S.oc(7,"label",84),S.oc(8,"span",85),S.bd(9,"Address:"),S.nc(),S.bd(10),S.nc(),S.nc(),S.nc()),2&t){const t=S.Cc();S.Vb(5),S.cd(t.nameCliente),S.Vb(5),S.cd(t.addressCliente)}}function vt(t,e){if(1&t){const t=S.pc();S.oc(0,"div",86),S.oc(1,"button",87),S.yc("click",function(){S.Tc(t);return S.Cc().onAddNewClient(!0)}),S.bd(2,"Edid"),S.nc(),S.oc(3,"button",88),S.yc("click",function(){S.Tc(t);return S.Cc().onDeleteClient()}),S.bd(4,"Delete"),S.nc(),S.nc()}}function gt(t,e){if(1&t){const t=S.pc();S.oc(0,"app-service-list",93),S.yc("deleteService",function(e){S.Tc(t);return S.Cc(3).deleteService(e)})("edidServiceEvent",function(e){S.Tc(t);return S.Cc(3).addService(e)}),S.nc()}if(2&t){const t=S.Cc(3);S.Jc("servicelist",t.services)}}function Ct(t,e){if(1&t){const t=S.pc();S.oc(0,"div",47),S.oc(1,"div",53),S.oc(2,"label",54),S.bd(3,"Services:"),S.nc(),S.oc(4,"button",91),S.yc("click",function(){S.Tc(t);return S.Cc(2).onAddNewService(!1)}),S.oc(5,"mat-icon"),S.bd(6,"add"),S.nc(),S.nc(),S.nc(),S.Zc(7,gt,1,1,"app-service-list",92),S.nc()}if(2&t){const t=S.Cc(2);S.Vb(7),S.Jc("ngIf",t.servicesExist)}}function wt(t,e){if(1&t){const t=S.pc();S.oc(0,"app-sub-contractors-list",96),S.yc("edidSubContractorsEvent",function(e){S.Tc(t);return S.Cc(3).addSubcontractor(e)})("deleteSubContractors",function(e){S.Tc(t);return S.Cc(3).deleteSubcontractor(e)}),S.nc()}if(2&t){const t=S.Cc(3);S.Jc("subcontractorlist",t.subcontractors)}}function xt(t,e){if(1&t){const t=S.pc();S.oc(0,"div",47),S.oc(1,"div",53),S.oc(2,"label",54),S.bd(3,"Subcontractors:"),S.nc(),S.oc(4,"button",94),S.yc("click",function(){S.Tc(t);return S.Cc(2).onAddNewSubcontractors(!1)}),S.oc(5,"mat-icon"),S.bd(6,"add"),S.nc(),S.nc(),S.nc(),S.Zc(7,wt,1,1,"app-sub-contractors-list",95),S.nc()}if(2&t){const t=S.Cc(2);S.Vb(7),S.Jc("ngIf",t.subcontractorsExist)}}function yt(t,e){if(1&t){const t=S.pc();S.oc(0,"app-bill-list",98),S.yc("deleteBill",function(e){S.Tc(t);return S.Cc(3).deleteBill(e)})("edidBillEvent",function(e){S.Tc(t);return S.Cc(3).addbill(e)}),S.nc()}if(2&t){const t=S.Cc(3);S.Jc("billList",t.bills)}}function Tt(t,e){if(1&t){const t=S.pc();S.oc(0,"div",50),S.oc(1,"div",53),S.oc(2,"label",54),S.bd(3,"Bills:"),S.nc(),S.oc(4,"button",94),S.yc("click",function(){S.Tc(t);return S.Cc(2).onAddNewBill(!1)}),S.oc(5,"mat-icon"),S.bd(6,"add"),S.nc(),S.nc(),S.nc(),S.Zc(7,yt,1,1,"app-bill-list",97),S.nc()}if(2&t){const t=S.Cc(2);S.Vb(7),S.Jc("ngIf",t.billExist)}}function Et(t,e){if(1&t&&(S.oc(0,"div",4),S.Zc(1,Ct,8,1,"div",89),S.Zc(2,xt,8,1,"div",89),S.Zc(3,Tt,8,1,"div",90),S.nc()),2&t){const t=S.Cc();S.Vb(1),S.Jc("ngIf",t.estimate.services),S.Vb(1),S.Jc("ngIf",t.estimate.subcontractors),S.Vb(1),S.Jc("ngIf",t.estimate.bills)}}function Vt(t,e){1&t&&(S.oc(0,"mat-error"),S.bd(1," Total Wich out Taxes is "),S.oc(2,"strong"),S.bd(3,"required"),S.nc(),S.nc())}function St(t,e){1&t&&(S.oc(0,"mat-error"),S.bd(1," Total Wich out Taxes is "),S.oc(2,"strong"),S.bd(3,"required"),S.nc(),S.nc())}function kt(t,e){if(1&t&&(S.oc(0,"div",19),S.jc(1,"app-view-estimate",99),S.nc()),2&t){const t=S.Cc();S.Vb(1),S.Jc("estimateView",t.estimate)("printProduct",t.email.printProduct)("profitCalculation",t.subcontractorsTotalProfit)("billTotalOverhead",t.billTotalOverhead)("servicesTotalOverhead",t.servicesTotalOverhead)("servicesTotal",t.servicesTotal)("subcontractorsTotal",t.subcontractorsTotal)("billLastTotal",t.billLastTotal)("dataJshandyManServices",t.dataJshandyManServices)}}function Dt(t,e){1&t&&(S.oc(0,"mat-icon"),S.bd(1,"menu"),S.nc())}function Ot(t,e){1&t&&(S.oc(0,"mat-icon"),S.bd(1,"filter_list"),S.nc())}function Pt(t,e){1&t&&(S.oc(0,"mat-icon"),S.bd(1,"delete_outline"),S.nc())}function At(t,e){1&t&&(S.oc(0,"mat-icon"),S.bd(1,"delete"),S.nc())}ut.\u0275fac=function(t){return new(t||ut)(S.ic(D.a))},ut.\u0275cmp=S.cc({type:ut,selectors:[["app-view-estimate"]],inputs:{estimateView:"estimateView",printProduct:"printProduct",billTotalOverhead:"billTotalOverhead",servicesTotalOverhead:"servicesTotalOverhead",profitCalculation:"profitCalculation",billLastTotal:"billLastTotal",servicesTotal:"servicesTotal",subcontractorsTotal:"subcontractorsTotal",dataJshandyManServices:"dataJshandyManServices"},features:[S.Tb],decls:146,vars:32,consts:[["bgcolor","#eeeeee",2,"margin","0 !important","padding","0 !important","background-color","#f1f0f0"],["border","0","cellpadding","0","cellspacing","0","width","100%"],["align","center","bgcolor","#eeeeee",2,"background-color","#eeeeee"],["align","center","border","0","cellpadding","0","cellspacing","0","width","100%",2,"max-width","600px"],[1,"imgen"],[1,"divEspacio"],["align","center","valign","top","bgcolor","#ffffff",2,"font-size","0","padding","35px"],[2,"display","inline-block","max-width","50%","min-width","100px","vertical-align","top","width","100%"],["align","left","border","0","cellpadding","0","cellspacing","0","width","100%",2,"max-width","300px"],["align","left","valign","top",2,"font-family","Open Sans, Helvetica, Arial, sans-serif","font-size","36px","font-weight","800","line-height","48px"],[2,"height","20px","width","auto"],["href","https://tallyhandyman.com",1,"logo"],["src","http://tallyhandyman.com/wp-content/uploads/2020/02/Logo_tally_handy_man-1.png","alt","Tally handy man",1,"logo-img",2,"width","px"],["align","right","valign","top",2,"font-family","Open Sans, Helvetica, Arial, sans-serif","font-size","48px","font-weight","400","line-height","48px"],["cellspacing","0","cellpadding","0","border","0","align","right"],[1,"tdhandy"],[1,"divhandy"],[1,"divhandy-mobile"],[2,"background-color","#ffffff","text-align","right","line-height","22px","border-bottom","#0c0b0b solid 2px","margin-right","5px"],[2,"margin-right","10px","font-weight","bold"],["bgcolor","#ffffff",2,"background-color","#ffffff"],[2,"display","inline-block","max-width","70%","min-width","100px","vertical-align","top","width","100%"],[1,"divhandy2",2,"width","100%","height","100%"],[1,"divhandy-mobile2",2,"font-weight","bold"],[4,"ngIf"],[2,"display","inline-block","max-width","30%","min-width","100px","vertical-align","top","width","100%"],[1,"divhandy-mobile2"],[2,"height","40px","width","100%"],[2,"height","35px","width","100%"],["align","left",2,"padding-top","20px"],["cellspacing","0","cellpadding","0","border","0","width","100%"],["width","75%","align","left",2,"font-family","arial, sans-serif","font-size","16px","font-weight","800","line-height","24px","padding","10px","border-top","2px solid #eeeeee"],["align","left"],[1,"table-text"],[2,"background-color","#fd604b","height","25px"],[2,"text-align","left","padding-left","8%","color","#ffffff"],[2,"text-align","right","padding-right","5%","color","#ffffff"],[2,"text-align","center","padding-right","5%","color","#ffffff"],["style","height: 18px;",4,"ngIf"],[2,"height","18px"],[2,"text-align","left","padding-left","8%"],[1,"total-1"],[1,"total"],[2,"height","2px","width","100%"],["align","center","bgcolor","#ffffff"],[2,"margin-top","10px","padding","35px","background-color","#fffbfbb4"],[2,"font-family","Open Sans, Helvetica, Arial, sans-serif","font-size","14px","font-weight","400"],[2,"font-size","10px","margin","0px","color","#0c0b0b"],[2,"text-align","left","margin-top","20px","margin-bottom","10px"],[2,"text-align","justify","line-height","18px"],[2,"line-height","20px","margin-top","10px","margin-bottom","10px"],[2,"line-height","20px"],["align","center","bgcolor","#ffffff",2,"padding","35px","background-color","#ffffff"],[2,"height","50px","width","100%"],["align","left",2,"font-family","Open Sans, Helvetica, Arial, sans-serif","font-size","14px","font-weight","400","line-height","24px"],[2,"margin-right","20px","margin-top","30px","font-size","12px","font-family","arial, sans-serif","border-collapse","collapse","width","100%","margin-left","50px"],[2,"text-align","center","border-top","#000000 solid 2px"],[2,"width","40px"],["class","divhandy-mobile2",4,"ngFor","ngForOf"],[2,"background-color","#ffffff","text-align","left","font-weight","bold","line-height","22px"],["style","height: 18px;",4,"ngFor","ngForOf"],[2,"text-align","right","padding-right","5%"],[2,"text-align","justify","padding-right","5%","border-top","#0c0b0b solid 1px"],[2,"text-align","right","padding-right","5%","border-top","#0c0b0b solid 1px"],["style","text-align: left; padding-left: 8%;",3,"ngClass",4,"ngIf"],["style","text-align: right; padding-right: 5%;",3,"ngClass",4,"ngIf"],[2,"text-align","left","padding-left","8%",3,"ngClass"],[2,"text-align","right","padding-right","5%",3,"ngClass"],[1,"total-Paind"],[2,"text-align","right","padding-right","5%","font-weight","bold"]],template:function(t,e){1&t&&(S.oc(0,"body",0),S.oc(1,"table",1),S.oc(2,"tr"),S.oc(3,"td",2),S.oc(4,"table",3),S.oc(5,"tr"),S.oc(6,"td",4),S.jc(7,"div",5),S.nc(),S.nc(),S.oc(8,"tr"),S.oc(9,"td",6),S.oc(10,"div",7),S.oc(11,"table",8),S.oc(12,"tr"),S.oc(13,"td",9),S.jc(14,"div",10),S.oc(15,"a",11),S.jc(16,"img",12),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.oc(17,"div",7),S.oc(18,"table",8),S.oc(19,"tr"),S.oc(20,"td",13),S.oc(21,"table",14),S.oc(22,"tr"),S.oc(23,"td",15),S.oc(24,"div",16),S.oc(25,"div",17),S.bd(26),S.nc(),S.oc(27,"div",17),S.bd(28),S.nc(),S.oc(29,"div",17),S.bd(30),S.nc(),S.oc(31,"div",17),S.bd(32),S.nc(),S.oc(33,"div",17),S.bd(34),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.oc(35,"tr"),S.oc(36,"td",18),S.oc(37,"div",19),S.bd(38),S.nc(),S.nc(),S.nc(),S.oc(39,"tr"),S.oc(40,"td",20),S.oc(41,"table",3),S.oc(42,"tr"),S.oc(43,"td",6),S.oc(44,"div",21),S.oc(45,"table",8),S.oc(46,"tr"),S.oc(47,"td",15),S.oc(48,"div",22),S.oc(49,"div",23),S.bd(50),S.nc(),S.nc(),S.nc(),S.oc(51,"td",15),S.oc(52,"div",16),S.Zc(53,L,3,2,"div",24),S.Zc(54,z,3,1,"div",24),S.Zc(55,B,2,1,"div",24),S.Zc(56,H,2,1,"div",24),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.oc(57,"div",25),S.oc(58,"table",8),S.oc(59,"tr"),S.oc(60,"td",15),S.oc(61,"div",16),S.oc(62,"div",23),S.bd(63),S.nc(),S.nc(),S.nc(),S.oc(64,"td",15),S.oc(65,"div",16),S.oc(66,"div",26),S.bd(67),S.nc(),S.nc(),S.nc(),S.nc(),S.oc(68,"tr"),S.oc(69,"td",15),S.oc(70,"div",16),S.oc(71,"div",23),S.bd(72," Date: "),S.nc(),S.nc(),S.nc(),S.oc(73,"td",15),S.oc(74,"div",16),S.oc(75,"div",26),S.bd(76),S.Dc(77,"date"),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.Zc(78,q,3,0,"tr",24),S.Zc(79,tt,21,3,"tr",24),S.Zc(80,et,3,0,"tr",24),S.Zc(81,ot,20,2,"tr",24),S.jc(82,"tr",27),S.Zc(83,nt,3,0,"tr",24),S.Zc(84,st,21,3,"tr",24),S.jc(85,"tr",28),S.oc(86,"tr"),S.oc(87,"td",29),S.oc(88,"table",30),S.oc(89,"tr"),S.oc(90,"td",31),S.bd(91," Payment Details: "),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.oc(92,"tr"),S.oc(93,"td",32),S.oc(94,"table",33),S.oc(95,"tr",34),S.oc(96,"th",35),S.bd(97," Description "),S.nc(),S.jc(98,"th",36),S.oc(99,"th",37),S.bd(100," Subtotal "),S.nc(),S.jc(101,"th",36),S.nc(),S.Zc(102,rt,7,1,"tr",38),S.Zc(103,lt,7,1,"tr",38),S.Zc(104,dt,7,1,"tr",38),S.Zc(105,ht,7,2,"tr",38),S.oc(106,"tr",39),S.jc(107,"td",40),S.oc(108,"td",41),S.bd(109,"Total:"),S.nc(),S.oc(110,"td",42),S.bd(111),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.jc(112,"tr",43),S.oc(113,"tr"),S.oc(114,"td",44),S.oc(115,"div",45),S.oc(116,"table",3),S.oc(117,"tr"),S.oc(118,"td",46),S.oc(119,"div",47),S.oc(120,"div",48),S.bd(121," Comments: "),S.nc(),S.oc(122,"div",49),S.bd(123),S.nc(),S.oc(124,"div",50),S.bd(125),S.nc(),S.oc(126,"div",51),S.bd(127),S.nc(),S.oc(128,"div",51),S.bd(129),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.oc(130,"tr"),S.oc(131,"td",52),S.oc(132,"table",3),S.jc(133,"tr",53),S.oc(134,"tr"),S.oc(135,"td",54),S.oc(136,"tr"),S.oc(137,"td",32),S.oc(138,"table",55),S.oc(139,"tr",39),S.oc(140,"td",56),S.bd(141," JS Handyman Services of Tally, Inc "),S.nc(),S.jc(142,"td",57),S.oc(143,"td",56),S.bd(144," Client's signature "),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.jc(145,"tr",53),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc()),2&t&&(S.Vb(26),S.cd(e.dataJshandyManServices.direction),S.Vb(2),S.cd(e.dataJshandyManServices.mail),S.Vb(2),S.cd(e.dataJshandyManServices.web),S.Vb(2),S.cd(e.dataJshandyManServices.phoneNumber),S.Vb(2),S.cd(e.dataJshandyManServices.taxRegNumber),S.Vb(4),S.cd(e.vistaName),S.Vb(12),S.cd(e.for),S.Vb(3),S.Jc("ngIf",e.estimateView.client.name),S.Vb(1),S.Jc("ngIf",e.estimateView.client.fullAdress),S.Vb(1),S.Jc("ngIf",e.estimateView.client.emails.length>0),S.Vb(1),S.Jc("ngIf",e.estimateView.client.phoneNumbers.length>0),S.Vb(7),S.dd(" ",e.tipoForm," No: "),S.Vb(4),S.cd(e.estimateView.idEstimate),S.Vb(9),S.dd(" ",S.Fc(77,29,e.todayDate,"dd/MM/yyyy")," "),S.Vb(2),S.Jc("ngIf",e.estimateView.bills.length>0),S.Vb(1),S.Jc("ngIf",e.estimateView.bills.length>0),S.Vb(1),S.Jc("ngIf",e.estimateView.services.length>0),S.Vb(1),S.Jc("ngIf",e.estimateView.services.length>0),S.Vb(2),S.Jc("ngIf",e.estimateView.subcontractors.length>0),S.Vb(1),S.Jc("ngIf",e.estimateView.subcontractors.length>0),S.Vb(18),S.Jc("ngIf",e.estimateView.bills.length>0),S.Vb(1),S.Jc("ngIf",e.estimateView.services.length>0),S.Vb(1),S.Jc("ngIf",e.estimateView.subcontractors.length>0),S.Vb(1),S.Jc("ngIf",e.estimateView.services.length>0||e.estimateView.bills.length>0),S.Vb(6),S.dd("$",e.coreService.round(e.estimateView.totalCostWork),""),S.Vb(12),S.dd("",e.dataJshandyManServices.coments1," "),S.Vb(2),S.dd(" ",e.dataJshandyManServices.coments2," "),S.Vb(2),S.dd(" ",e.dataJshandyManServices.coments3," "),S.Vb(2),S.dd(" ",e.dataJshandyManServices.coments4," "))},directives:[o.n,o.m,o.l],pipes:[o.f],styles:['a[_ngcontent-%COMP%], body[_ngcontent-%COMP%], table[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{mso-table-lspace:0;mso-table-rspace:0}img[_ngcontent-%COMP%]{-ms-interpolation-mode:bicubic;border:0;height:auto;line-height:100%;outline:none;text-decoration:none}table[_ngcontent-%COMP%]{border-collapse:collapse!important}body[_ngcontent-%COMP%]{height:100%!important;margin:0!important;padding:0!important;width:100%!important}a[x-apple-data-detectors][_ngcontent-%COMP%]{color:inherit!important;text-decoration:none!important;font-size:inherit!important;font-family:inherit!important;font-weight:inherit!important;line-height:inherit!important}@media screen and (max-width:480px){img[_ngcontent-%COMP%]{height:auto;width:120px}.divhandy-mobile[_ngcontent-%COMP%]{font-size:8px;margin:0;color:#0a0a0a;line-height:10px;text-align:right}.divEspacio[_ngcontent-%COMP%]{height:50px!important}.imgen[_ngcontent-%COMP%]{height:50%!important}.divhandy-mobile2[_ngcontent-%COMP%]{font-size:8px;margin:0;color:#0a0a0a;line-height:10px;text-align:right}.mobile-hide[_ngcontent-%COMP%]{display:none!important}.mobile-center[_ngcontent-%COMP%]{text-align:center!important}.table-text[_ngcontent-%COMP%]{font-size:8px!important}.total-Paind[_ngcontent-%COMP%]{text-align:right!important;padding-right:5%!important;font-weight:700!important}.total[_ngcontent-%COMP%]{text-align:right!important}.total[_ngcontent-%COMP%], .total-1[_ngcontent-%COMP%]{padding-right:5%!important;border-top:1px solid #0c0b0b!important;font-size:10px!important;font-weight:700!important}.total-1[_ngcontent-%COMP%]{text-align:justify!important}}div[style*="margin: 16px 0;"][_ngcontent-%COMP%]{margin:0!important}.imgen[_ngcontent-%COMP%]{height:100%;background-size:100%}.imagen2[_ngcontent-%COMP%], .imgen[_ngcontent-%COMP%]{background-image:url(https://i.postimg.cc/jS33pZKh/5a9cda4f-00f8-43fe-bb1c-fc28ebb89a40.png)}.imagen2[_ngcontent-%COMP%]{height:400px;background-size:cover;background-repeat:no-repeat;background-position:50%}.divEspacio[_ngcontent-%COMP%]{height:70px;width:100%}.tdhandy[_ngcontent-%COMP%]{font-family:Open Sans,Helvetica,Arial,sans-serif;font-size:18px;font-weight:400}.divhandy[_ngcontent-%COMP%]{font-size:10px;margin:0;color:#0c0b0b;line-height:18px;text-align:right}.table-text[_ngcontent-%COMP%]{font-size:12px;font-family:arial,sans-serif;border-collapse:collapse;width:100%}.total-Paind[_ngcontent-%COMP%]{text-align:right;padding-right:5%;font-weight:700}.total[_ngcontent-%COMP%]{text-align:right}.total[_ngcontent-%COMP%], .total-1[_ngcontent-%COMP%]{padding-right:5%;border-top:1px solid #0c0b0b;font-size:14px;font-weight:700}.total-1[_ngcontent-%COMP%]{text-align:justify}.corretion[_ngcontent-%COMP%]{text-decoration:line-through;color:#000;-webkit-text-decoration-color:#000;text-decoration-color:#000}.divhandy2[_ngcontent-%COMP%]{font-size:10px;margin:0;color:#0c0b0b;line-height:18px;text-align:start}.divhandy-mobile3[_ngcontent-%COMP%]{font-size:8px;margin-left:10px!important;color:#0a0a0a;line-height:10px;text-align:right}']});class Mt{constructor(t,e,i,o,n,c,a,s,l){this.fb=t,this.route=e,this.serviceEstimate=i,this.coreService=o,this.dialog=n,this._snackBar=c,this.router=a,this.sessionService=s,this.spinnerService=l,this.tileAndForm=this.fb.group({title:["",r.u.required],description:["",r.u.required],starDate:null,overhead:null}),this.inputForm=this.fb.group({totalCostWork:[null,r.u.required],totalCostWorkWithoutTaxes:[null]}),this.selected=new r.e(0),this.colorTab="accent",this.fondo="primary",this.buttonView=!1,this.disabledTab=!0,this.nameCliente="____________",this.addressCliente="____________",this.newClientTitle="New Client: ",this.vistaName="",this.estimate=new p.a,this.totalMnual=0,this.activateManual=!0,this.servicesTotalOverhead=0,this.billTotalOverhead=0,this.billTotalWichoutTaxesOverhead=0,this.subcontractorsTotalProfit=0,this.overheadSinbolo=" %",this.disableStatusList=!1,this.statusList=["IN PROGRESS","CANCELED","PAUSE","APPROVED"],this.statusList2=["APPROVED","IN PROGRESS","SEND","CANCELED","PAUSE"],this.positionOptions=["below","above","left","right"],this.position=new r.e(this.positionOptions[2]),this.hoveredDivId=1,this.notificationresponse=!1,this.tooltipStatus="This is the Status of the Estimate",this.email=new b.a,this.servicesTotal=0,this.billLastTotal=0,this.subcontractorsTotal=0,this.dataJshandyManServices=new m.a,this.seccion=this.sessionService.get("UserSession")}selectChange(t){this.selected.setValue(t)}onPrintProduct(){this.email.printProduct=!this.email.printProduct}ngOnChanges(t){}getDataMail(){this.dataJshandyManServices=this.coreService.dataJshandy,this.email.subject=this.dataJshandyManServices.company}ngOnInit(){this.getDataMail(),this.route.queryParams.forEach(t=>{this.billExist=!1,this.subcontractorsExist=!1,this.servicesExist=!1,void 0!==t.id||null!=t.id?this.serviceEstimate.getEsimateById(t.id).subscribe(t=>{this.estimate=t.entidades[0],this.viewEstimate()}):this.newEstimateview()}),this.mostrarTotalCost()}newEstimateview(){this.estimate=new p.a,this.vistaName="New Estimate",this.disableStatusList=!0,this.estimate.status=d.a.NewESTIMATE,this.clinetExist=!1,this.disabledTab=!0,this.tileAndForm.patchValue({overhead:"",description:"",title:"",starDate:""}),this.setTabletsAtributte(this.estimate)}viewEstimate(){void 0!==this.estimate&&null!==this.estimate&&(void 0!==this.estimate.idEstimate&&null!=this.estimate.idEstimate&&void 0!==this.estimate.codeWork&&null!==this.estimate.codeWork&&(this.disabledTab=!1,this.disableStatusList=!1,this.tooltipStatus="This is the Status of the Estimate, click on it to change it manually."),this.vistaName=`Estimate: ${this.estimate.idEstimate}`,void 0!==this.estimate.client&&null!=this.estimate.client&&this.sedDataClientInView(this.estimate.client.name,this.estimate.client.fullAdress),this.sedDataInView(),this.clinetExist=!0,this.setTabletsAtributte(this.estimate))}sedDataInView(){this.tileAndForm.patchValue({overhead:this.estimate.overhead,description:this.estimate.description,title:this.estimate.title,starDate:this.estimate.starDate}),this.inputForm.patchValue({totalCostWork:this.serviceEstimate.round(this.estimate.totalCostWork),totalCostWorkWithoutTaxes:this.serviceEstimate.round(this.estimate.totalCostWorkWithoutTaxes)})}setTablets(t){this.subcontractorsExist=!0,this.billExist=!0,this.servicesExist=!0,this.services=t.services,this.bills=t.bills,this.subcontractors=t.subcontractors}setTabletsAtributte(t){this.setTablets(t),t.services.length>0&&this.disableManualTotal(),t.bills.length>0&&this.disableManualTotal(),void 0!==t.subcontractors&&t.subcontractors.length>0&&this.disableManualTotal(),this.total()}addEvent(t,e){this.estimate.starDate=this.tileAndForm.value.starDate}onTitle(){this.estimate.title=this.tileAndForm.value.title}onDescription(){this.estimate.description=this.tileAndForm.value.description}sedDataClientInView(t,e){this.nameCliente=` ${t}`,this.addressCliente=` ${e}`}clearInput(){this.tileAndForm.get("title").setValue("")}changueStatus(t){this.estimate.status=t,this.estimate.status==this.statusList[3]&&this.save()}onAddNewClient(t){let e=new u.a;void 0!==t&&null!=t&&t?e=this.estimate.client:t=!1;const i=new l.d;i.disableClose=!0,i.autoFocus=!0,i.width="50%",i.height="80%",i.data={atributo:e,edit:t};this.dialog.open(w.a,i).afterClosed().subscribe(t=>{if(void 0!==t){this.estimate.client=t;const e=`${this.estimate.client.name} ${this.estimate.client.lastName}`;this.sedDataClientInView(e,this.estimate.client.fullAdress),this.clinetExist=!0}})}onDeleteClient(){this.estimate.client=null,this.estimate.client=new u.a,this.clinetExist=!1}onAddNewSubcontractors(t,e){let i=new v.a;void 0!==t&&null!=t&&t?i=e:t=!1;const o=new l.d;o.disableClose=!0,o.autoFocus=!0,o.width="95%",o.height="85%",o.data={atributo:i,edit:t};this.dialog.open(E.a,o).afterClosed().subscribe(t=>{void 0!==t&&(this.subcontractorsExist=!0,void 0!==t.newSubContractor&&null!=t.newSubContractor&&(void 0!==this.estimate.client&&null!=this.estimate.client&&(t.newSubContractor.codeClient=this.estimate.client.codeClient),this.estimate.subcontractors.push(t.newSubContractor),this.subcontractors=this.estimate.subcontractors,this.subContractorsTablet.updatedatasourse(this.estimate.subcontractors),this.total()))})}addSubcontractor(t){this.estimate.subcontractors.push(t),this.total()}deleteSubcontractor(t){const e=this.estimate.subcontractors.filter(e=>e!==t);this.estimate.subcontractors=e,this.checkListForEnableManualTotalInput()}onAddNewService(t,e){let i=new f.a;void 0!==t&&null!=t&&t?i=e:t=!1;const o=new l.d;o.disableClose=!0,o.autoFocus=!0,o.width="auto",o.height="auto",o.data={atributo:i,edit:t};this.dialog.open(y.a,o).afterClosed().subscribe(t=>{void 0!==t&&(this.servicesExist=!0,void 0!==t.newService&&null!=t.newService&&(this.estimate.services.push(t.newService),this.serviceTablet.updatedataSourse(this.estimate.services))),this.total()})}addService(t){this.estimate.services.push(t),this.total()}deleteService(t){const e=this.estimate.services.filter(e=>e!==t);this.estimate.services=e,this.checkListForEnableManualTotalInput()}onAddNewBill(t,e){let i=new h.a;void 0!==t&&null!=t&&t?i=e:t=!1;const o=new l.d;o.disableClose=!0,o.autoFocus=!0,o.width="50%",o.height="80%",o.data={atributo:i,edit:t};this.dialog.open(C.a,o).afterClosed().subscribe(t=>{void 0!==t&&void 0!==t.newBill&&null!=t.newBill&&(this.billExist=!0,this.estimate.bills.push(t.newBill),this.bills=this.estimate.bills,this.billListTablet.updatedatasourse(this.bills),this.total())})}addbill(t){this.estimate.bills.push(t),this.total()}deleteBill(t){const e=this.estimate.bills.filter(e=>e!==t);this.estimate.bills=e,this.checkListForEnableManualTotalInput()}total(){let t=0,e=0,i=0,o=0,n=0,c=0,a=0;if(this.servicesTotal=0,this.subcontractorsTotal=0,this.billLastTotal=0,this.subcontractorsTotalProfit=0,this.servicesTotalOverhead=0,this.billTotalOverhead=0,null!=this.estimate.bills&&void 0!==this.estimate.bills&&this.estimate.bills.length>0&&(this.estimate.bills.forEach(i=>{i.itemDeliteEdit||(t+=i.billTotal,e+=i.billTotalWichoutTaxes)}),this.disableManualTotal()),this.billTotalOverhead=this.calculateOverheads(t),this.billTotalWichoutTaxesOverhead=this.calculateOverheads(e),i=e,this.billLastTotal=t,null!=this.estimate.services&&void 0!==this.estimate.services&&this.estimate.services.length>0&&(this.estimate.services.forEach(t=>{t.itemDeliteEdit||(o+=t.servicesCost)}),this.disableManualTotal(),this.servicesTotalOverhead=this.calculateOverheads(o),this.servicesTotal=o),null!=this.estimate.subcontractors&&void 0!==this.estimate.subcontractors&&this.estimate.subcontractors.length>0){let t=0;this.estimate.subcontractors.forEach(e=>{e.itemDeliteEdit||(this.subcontractorsTotal+=e.totalCost,a+=e.costOfwork,void 0!==e.billListSubcontractor&&null!=e.billListSubcontractor&&e.billListSubcontractor.length>0&&e.billListSubcontractor.forEach(e=>{t+=e.billTotal}),e.profitCalculation=(e.costOfwork+t)*(e.profit/100),this.subcontractorsTotalProfit+=this.serviceEstimate.round(e.profitCalculation))}),this.disableManualTotal()}n=this.servicesTotal+this.subcontractorsTotal+this.servicesTotalOverhead+i+this.billTotalWichoutTaxesOverhead,c=this.servicesTotal+this.subcontractorsTotal+this.servicesTotalOverhead+this.billLastTotal+this.billTotalOverhead;const s=this.serviceEstimate.round(n),r=this.serviceEstimate.round(c);this.inputForm.patchValue({totalCostWorkWithoutTaxes:s,totalCostWork:r}),this.estimate.totalCostWork=r,this.estimate.totalCostWorkWithoutTaxes=s}calculateProfit(t,e){let i;return void 0!==e&&null!=e?(i=t*(e/100),this.serviceEstimate.round(i)):this.serviceEstimate.round(t)}calculateOverheads(t){let e;return void 0!==this.tileAndForm.value.overhead&&null!=this.tileAndForm.value.overhead?(e=t*(this.tileAndForm.value.overhead/100),this.serviceEstimate.round(e)):0}calculateOverhead(t){let e;return void 0!==this.tileAndForm.value.overhead&&null!=this.tileAndForm.value.overhead?(e=t+t*(this.tileAndForm.value.overhead/100),e):0}totalWithTaxesCalculation(t,e){let i=0;i=e?t+t*(this.seccion.taxes/100):t;const o=this.serviceEstimate.round(i);this.inputForm.patchValue({totalCostWork:o}),this.estimate.totalCostWork=o}totalWichOutTaxesCalculation(t,e){let i=0;i=e?t-t*(this.seccion.taxes/100):t;const o=this.serviceEstimate.round(i);this.inputForm.patchValue({totalCostWorkWithoutTaxes:o}),this.estimate.totalCostWorkWithoutTaxes=o}totalManualWichTaxes(){let t=0;t=void 0!==this.estimate.overhead&&null!=this.estimate.overhead?this.calculateOverhead(this.inputForm.value.totalCostWork):this.inputForm.value.totalCostWork,this.totalWithTaxesCalculation(t,!1),this.totalWichOutTaxesCalculation(t,!0),this.totalMnual=t}totalManualWichOutTaxes(){let t=0;t=void 0!==this.estimate.overhead&&null!=this.estimate.overhead?this.calculateOverhead(this.inputForm.value.totalCostWorkWithoutTaxes):this.inputForm.value.totalCostWorkWithoutTaxes,this.totalWichOutTaxesCalculation(t,!1),this.totalWithTaxesCalculation(t,!0),this.totalMnual=t}onOverhead(){this.estimate.overhead=this.tileAndForm.value.overhead,this.total(),0==this.inputForm.value.totalCostWork&&0!==this.totalMnual&&(this.totalWithTaxesCalculation(this.totalMnual,!1),this.totalWichOutTaxesCalculation(this.totalMnual,!0))}disableManualTotal(){this.inputForm.disable()}enableManualTotal(){this.inputForm.enable()}checkListForEnableManualTotalInput(){0==this.estimate.bills.length&&0==this.estimate.services.length&&0==this.estimate.subcontractors.length?(this.total(),this.enableManualTotal()):this.total()}saveNotification(){let t="Save Alert";const e=new l.d;if(e.disableClose=!0,e.autoFocus=!0,e.width="45%",e.height="auto","APPROVED"===this.estimate.status){let i='"An approved Estimate cannot be saved. You must change the status to be able to save."';e.data={title:t,msg:i,cancel:"Cancel"}}else e.data={title:t,msg:"Confirm that you want to save the Estimate?",cancel:"Cancel",confirm:"Confirm"};this.dialog.open(x.a,e).afterClosed().subscribe(t=>{t&&this.save()})}save(){void 0!==this.estimate.idEstimate&&null!=this.estimate.idEstimate&&void 0!==this.estimate.codeWork&&null!==this.estimate.codeWork?this.serviceEstimate.saveAndUpdateEstimate(this.estimate).subscribe(t=>{this.estimate=t,this.viewEstimate()},t=>{console.log("Error",t);this.openSnackBar('"An error occurred while trying to Update Estimate"',"Close")}):(console.log("this.estimate::",JSON.stringify(this.estimate)),this.serviceEstimate.saveEstimate(this.estimate).subscribe(t=>{this.estimate=t,this.viewEstimate()},t=>{console.log("Error",t);this.openSnackBar('"An error occurred while trying to save a new Estimate"',"Close")}))}openSnackBar(t,e){this._snackBar.open(t,e)}onCancel(){this.tileAndForm.patchValue({overhead:null,description:null,title:null,starDate:null}),this.inputForm.patchValue({totalCostWork:null,totalCostWorkWithoutTaxes:null}),this.estimate=null,this.router.navigateByUrl("/jshandy-man-services/menu/home")}onCopyEstimate(){if(void 0!==this.estimate.idEstimate&&null!=this.estimate.idEstimate)this.notification("Client copy confirmation","You also want to copy the Client loaded in the Estimate","copy","No","Yes");else{const t='"An Estimate cannot be copied without being Saved first"';this.openSnackBar(t,"Close")}}onConvertEstimate(){if(void 0!==this.estimate.idEstimate&&null!=this.estimate.idEstimate){const t="You want to turn the Estimate into an effective job to generate an invoice";this.notification(" Convert Estimate to Job Confirmation",t,"convert","Cancel","Agree")}else{const t='"An Estimate cannot be convert without being Saved first"';this.openSnackBar(t,"Close")}}onDeleteEstimate(){if(void 0!==this.estimate.idEstimate&&null!=this.estimate.idEstimate){const t="If you want to delete the estimate, by accepting you will lose access to this information permanently.";this.notification("Delete Estimate Confirmation",t,"delete","Cancel","Agree")}else{const t='"An Estimate cannot be delete without being Saved first"';this.openSnackBar(t,"Close")}}copyEstimate(t){let e=new p.a;e=this.serviceEstimate.copyEstimate(this.estimate,t),this.estimate=e,this.estimate.status=d.a.NewESTIMATE,this.viewEstimate(),this.vistaName="New Estimate",this.disabledTab=!0,t||(this.nameCliente="",this.addressCliente="",this.clinetExist=!1),void 0!==e.starDate&&null==e.starDate||this.tileAndForm.patchValue({starDate:null})}notification(t,e,i,o,n,c){const a=new l.d;a.disableClose=!0,a.autoFocus=!0,a.width="45%",a.height="auto",a.data={title:t,msg:e,cancel:o,confirm:n};this.dialog.open(x.a,a).afterClosed().subscribe(t=>{t&&("copy"===i&&this.copyEstimate(t),"delete"===i&&this.deleteEstimate(),"convert"===i&&this.covertEstimate(this.estimate),"convertCheckInvoice"===i&&this.onNavegateToInvoice(c))})}onNavegateToInvoice(t){this.router.navigate(["/jshandy-man-services/menu/invoice/edid-and-detail"],{queryParams:{id:t}})}covertEstimate(t){t.status=d.a.APPROVED,this.spinnerService.spinnerActive=!1,this.spinnerService.show(),this.serviceEstimate.checkInvoiceToEstimate(t.idEstimate).subscribe(e=>{const i=e.entidades[0],o=void 0!==i.idWork||null!=i.idWork?"There is already an invoice created, its status is active or paused":'" the invoice will be created"';void 0===i.idWork||null==i.idWork?this.serviceEstimate.saveAndUpdateEstimate(t).subscribe(e=>{this.covert(t)},e=>{console.log("Error",e),this.covert(t)}):(this.spinnerService.hide(),this.spinnerService.spinnerActive=!0,this.notification("Convert Estimate to Job Confirmation",o,"convertCheckInvoice","Cancel","Go to Invoice",i.idWork))},t=>{console.log("Error",t),this.spinnerService.hide(),this.spinnerService.spinnerActive=!0})}covert(t){this.serviceEstimate.covertEstimate(t).subscribe(t=>{this.spinnerService.hide(),this.spinnerService.spinnerActive=!0;const e=t?'"the work was create"':'" the invoice could not be created"';this.openSnackBar(e,"Close"),t&&this.router.navigateByUrl("/jshandy-man-services/menu/invoice/list")},t=>{this.spinnerService.hide(),this.spinnerService.spinnerActive=!0,console.log("Error",t);this.openSnackBar('"An error occurred while trying to check the id of Estimate"',"Close")})}deleteEstimate(){this.spinnerService.spinnerActive=!1,this.spinnerService.show(),this.estimate.status=d.a.CANCELED,this.serviceEstimate.saveAndUpdateEstimate(this.estimate).subscribe(t=>{this.delete()},t=>{console.log("Error",t),this.delete()})}delete(){this.serviceEstimate.deleteEsimate(this.estimate.idEstimate.toString()).subscribe(t=>{const e=t?'"the Estimate was deleted"':'"the Estimate cant not be delete"';this.openSnackBar(e,"Close"),this.spinnerService.hide(),this.spinnerService.spinnerActive=!0,t&&this.router.navigateByUrl("/jshandy-man-services/menu/estimate/list")})}cambio(){this.buttonView=!this.buttonView}mostrarTotalCost(){}showDivWithHoverStyles(t){this.hoveredDivId=t}showAllDivsWithDefaultStyles(){this.hoveredDivId=1}}Mt.\u0275fac=function(t){return new(t||Mt)(S.ic(r.d),S.ic(a.a),S.ic(k.a),S.ic(D.a),S.ic(l.b),S.ic(O.a),S.ic(a.c),S.ic(P.a),S.ic(A.a))},Mt.\u0275cmp=S.cc({type:Mt,selectors:[["app-edit-estimate"]],viewQuery:function(t,e){if(1&t&&(S.fd(T.a,1),S.fd(V.a,1),S.fd(g.a,1)),2&t){let t;S.Qc(t=S.zc())&&(e.serviceTablet=t.first),S.Qc(t=S.zc())&&(e.subContractorsTablet=t.first),S.Qc(t=S.zc())&&(e.billListTablet=t.first)}},features:[S.Tb],decls:152,vars:45,consts:[[1,"topeSeparation"],["mat-align-tabs","center","mat-stretch-tabs","",1,"parent-tab-group",3,"selectedIndex","selectedIndexChange"],["label","Estimate - Edid"],[1,"container-fluid","mb-1","mt-2"],[1,"row"],[1,"col-sm"],["for","title",1,"m-1","h3"],["matTooltipClass","tooltip-tooltip-blue",1,"flowRight","mr-1",3,"matTooltip"],["tooltip","matTooltip"],["mat-raised-button","",1,"flowRight","mr-1","border",2,"width","140px",3,"matMenuTriggerFor","disabled"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"container-fluid"],[1,"row","mat-elevation-z4"],[1,"col-12","d-sm-block"],[1,"col-12",3,"formGroup"],[1,"input-group","m-3"],["for","title",1,"m-1","h4"],["type","text","formControlName","title","id","title","placeholder","... ","aria-label","username","aria-describedby","basic-addon2","required","",1,"form-control",3,"keyup"],[1,"container-fluid","mt-3"],[1,"row","border","mat-elevation-z4"],[1,"col","d-sm-block","mt-2"],[1,"col-12"],["appearance","fill",2,"width","100%"],["matInput","","placeholder","Description","formControlName","description","required","",3,"keyup"],[4,"ngIf"],[1,"row","mt-3"],[1,"col-sm-12","col-md-6","col-lg-6","col-xl-6","d-sm-block","mb-2"],[1,"card","mac-card","mat-elevation-z4",2,"border","none"],[1,"card-body"],[1,"card-title"],["class","card-subtitle mb-2 text-muted",4,"ngIf"],["class","mb-1",4,"ngIf"],["class","mt-4 d-flex justify-content-center",4,"ngIf"],[1,"col-sm-12","col-md-6","col-lg-6","col-xl-6","d-sm-block"],[2,"font-size","14px",3,"formGroup"],[1,"input-group","mt-2","d-flex","align-items-center",2,"width","100%"],["for","overhead",1,"mr-1"],["appearance","fill"],["matInput","","type","number","placeholder","Overhead","formControlName","overhead",3,"keyup.enter","focusout"],["for","overhead",1,"mr-1",2,"margin-left","5px"],["for","starDate",1,"mr-1"],["appearance","fill",2,"width","80%"],["matInput","","formControlName","starDate",3,"matDatepicker","dateChange"],["matSuffix","",3,"for"],["picker1",""],["class","row",4,"ngIf"],[1,"col-sm-12","col-md-4","col-lg-4","col-xl-4","d-sm-block","mb-2"],[1,"card","mac-card","mat-elevation-z4"],["for","starDate",1,"h5"],[1,"col-sm-12","col-md-4","col-lg-4","col-xl-4","d-sm-block"],[1,"col-sm-12","col-md-6","col-lg-6","col-xl-6","d-sm-block","viewWidth"],[1,"card","mac-card",2,"border","none"],[1,"m-2"],["for","starDate",1,"h4"],["novalidate","",1,"container-fluid","mt-2",3,"formGroup"],[1,"mt-1"],[1,"row","h5"],[1,"col-sm-12","col-md-5","col-lg-5","col-xl-5","d-sm-block","mb-2","viewWidth","mt-2","d-flex","justify-content-center"],[1,"full-width"],["matInput","","type","number","placeholder","Total Wich out Taxes:","formControlName","totalCostWorkWithoutTaxes","required","",2,"text-align","center",3,"keyup.enter","focusout"],[1,"col-sm-12","col-md-2","col-lg-2","col-xl-2","d-sm-block","viewWidth"],["matInput","","type","number","placeholder","Total Cost:","formControlName","totalCostWork","required","",2,"text-align","center",3,"keyup.enter","focusout"],[1,"mt-2","mb-2","d-flex","justify-content-center"],["mat-button","",1,"m-1",2,"background-color","green","color","white",3,"click"],["mat-button","",1,"m-1","ml-5",2,"background-color","rgb(202, 5, 5)","color","white",3,"click"],["label","View Estimate",2,"font-size","xx-large",3,"disabled"],["class","container-fluid mt-3",4,"ngIf"],["label","Send Mail",3,"disabled"],[1,"mt-2",3,"estimatePojo","emailHandyManTally","sendEvent"],[1,"contenedor"],["matTooltip","Menu","matTooltipClass","tooltip-tooltip-yelon",1,"botonF1",3,"matTooltipPosition","mouseover","mouseout"],["matTooltip","Place list Products of the Bills","matTooltipClass","tooltip-tooltip-blue",1,"botonF2",3,"ngClass","matTooltipPosition","mouseover","mouseout","click"],["matTooltip","Transforn to Invoice","matTooltipClass","tooltip-tooltip-green",1,"botonF3",3,"ngClass","matTooltipPosition","mouseover","mouseout","click"],["matTooltip","Copy Estimate","matTooltipClass","tooltip-tooltip-purpe",1,"botonF4",3,"ngClass","matTooltipPosition","mouseover","mouseout","click"],["matTooltip","Delete Estimate","matTooltipClass","tooltip-tooltip-red",1,"botonF5",3,"ngClass","matTooltipPosition","mouseover","mouseout","click"],["matTooltip","Save Invoice","matTooltipClass","tooltip-tooltip-green",1,"botonF6",3,"ngClass","matTooltipPosition","mouseover","mouseout","click"],["matTooltip","Cancel","matTooltipClass","tooltip-tooltip-purpe",1,"botonF7",3,"ngClass","matTooltipPosition","mouseover","mouseout","click"],["mat-menu-item","",3,"click"],[1,"card-subtitle","mb-2","text-muted"],[2,"color","black"],["mat-mini-fab","","color","primary","aria-label","button with a plus new client",1,"ml-1",3,"click"],[1,"mb-1"],[1,"ml-2"],["for","title",1,"m-1"],[2,"font-weight","bold"],[1,"mt-4","d-flex","justify-content-center"],["mat-button","",1,"m-1","buttonEdid",3,"click"],["mat-button","",1,"m-1","ml-5","buttonDelete",3,"click"],["class","col-sm-12 col-md-4 col-lg-4 col-xl-4 d-sm-block mb-2",4,"ngIf"],["class","col-sm-12 col-md-4 col-lg-4 col-xl-4 d-sm-block ",4,"ngIf"],["mat-mini-fab","","color","primary","aria-label","button with a plus new client",1,"flowRight",3,"click"],[3,"servicelist","deleteService","edidServiceEvent",4,"ngIf"],[3,"servicelist","deleteService","edidServiceEvent"],["mat-mini-fab","","color","primary","aria-label","button with a plus new client",1,"m-1","flowRight",3,"click"],[3,"subcontractorlist","edidSubContractorsEvent","deleteSubContractors",4,"ngIf"],[3,"subcontractorlist","edidSubContractorsEvent","deleteSubContractors"],[3,"billList","deleteBill","edidBillEvent",4,"ngIf"],[3,"billList","deleteBill","edidBillEvent"],[2,"width","100%","height","100%",3,"estimateView","printProduct","profitCalculation","billTotalOverhead","servicesTotalOverhead","servicesTotal","subcontractorsTotal","billLastTotal","dataJshandyManServices"]],template:function(t,e){if(1&t&&(S.oc(0,"div",0),S.oc(1,"mat-tab-group",1),S.yc("selectedIndexChange",function(t){return e.selected.setValue(t)}),S.oc(2,"mat-tab",2),S.jc(3,"br"),S.oc(4,"div",3),S.oc(5,"div",4),S.oc(6,"div",5),S.oc(7,"label",6),S.bd(8),S.nc(),S.nc(),S.oc(9,"div",5),S.oc(10,"samp",7,8),S.oc(12,"mat-icon"),S.bd(13,"help"),S.nc(),S.nc(),S.oc(14,"button",9),S.bd(15),S.nc(),S.oc(16,"mat-menu",null,10),S.Zc(18,mt,2,1,"button",11),S.nc(),S.nc(),S.nc(),S.nc(),S.oc(19,"div",12),S.oc(20,"div",13),S.oc(21,"div",14),S.oc(22,"form",15),S.oc(23,"div",16),S.oc(24,"label",17),S.bd(25,"Title:"),S.nc(),S.oc(26,"input",18),S.yc("keyup",function(){return e.onTitle()}),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.oc(27,"div",19),S.oc(28,"div",20),S.oc(29,"div",21),S.oc(30,"div",22),S.oc(31,"form",15),S.oc(32,"mat-form-field",23),S.oc(33,"textarea",24),S.yc("keyup",function(){return e.onDescription()}),S.nc(),S.Zc(34,bt,4,0,"mat-error",25),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.oc(35,"div",26),S.oc(36,"div",27),S.oc(37,"div",28),S.oc(38,"div",29),S.oc(39,"h5",30),S.bd(40,"Client:"),S.nc(),S.Zc(41,pt,6,1,"h6",31),S.Zc(42,ft,11,2,"div",32),S.Zc(43,vt,5,0,"div",33),S.nc(),S.nc(),S.nc(),S.oc(44,"div",34),S.oc(45,"div",28),S.oc(46,"div",29),S.oc(47,"h5",30),S.bd(48,"Estimate Data:"),S.nc(),S.oc(49,"form",35),S.oc(50,"div",36),S.oc(51,"label",37),S.bd(52,"Overhead:"),S.nc(),S.oc(53,"mat-form-field",38),S.oc(54,"input",39),S.yc("keyup.enter",function(){return e.onOverhead()})("focusout",function(){return e.onOverhead()}),S.nc(),S.nc(),S.oc(55,"label",40),S.bd(56,"%"),S.nc(),S.nc(),S.oc(57,"div",36),S.oc(58,"label",41),S.bd(59,"Star Date:"),S.nc(),S.oc(60,"mat-form-field",42),S.oc(61,"input",43),S.yc("dateChange",function(t){return e.addEvent("change",t)}),S.nc(),S.jc(62,"mat-datepicker-toggle",44),S.jc(63,"mat-datepicker",null,45),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.oc(65,"div",19),S.Zc(66,Et,4,3,"div",46),S.nc(),S.jc(67,"br"),S.oc(68,"div",19),S.oc(69,"div",4),S.oc(70,"div",47),S.oc(71,"div",48),S.oc(72,"div",29),S.oc(73,"label",49),S.bd(74,"Service Overhead:"),S.nc(),S.bd(75),S.nc(),S.nc(),S.nc(),S.oc(76,"div",47),S.oc(77,"div",48),S.oc(78,"div",29),S.oc(79,"label",49),S.bd(80,"Profit:"),S.nc(),S.bd(81),S.nc(),S.nc(),S.nc(),S.oc(82,"div",50),S.oc(83,"div",48),S.oc(84,"div",29),S.oc(85,"label",49),S.bd(86," Bill Overhead:"),S.nc(),S.bd(87),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.jc(88,"br"),S.oc(89,"div",51),S.oc(90,"div",52),S.oc(91,"div",29),S.oc(92,"div",53),S.oc(93,"label",54),S.bd(94,"Total Cost:"),S.nc(),S.nc(),S.oc(95,"form",55),S.oc(96,"div",56),S.oc(97,"div",57),S.oc(98,"div",58),S.oc(99,"div",48),S.oc(100,"div",29),S.oc(101,"mat-form-field",59),S.oc(102,"input",60),S.yc("keyup.enter",function(){return e.totalManualWichOutTaxes()})("focusout",function(){return e.totalManualWichOutTaxes()}),S.nc(),S.Zc(103,Vt,4,0,"mat-error",25),S.nc(),S.nc(),S.nc(),S.nc(),S.jc(104,"div",61),S.oc(105,"div",58),S.oc(106,"div",48),S.oc(107,"div",29),S.oc(108,"mat-form-field",59),S.oc(109,"input",62),S.yc("keyup.enter",function(){return e.totalManualWichTaxes()})("focusout",function(){return e.totalManualWichTaxes()}),S.nc(),S.Zc(110,St,4,0,"mat-error",25),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.nc(),S.jc(111,"br"),S.oc(112,"div",63),S.oc(113,"button",64),S.yc("click",function(){return e.saveNotification()}),S.bd(114,"Save"),S.nc(),S.oc(115,"button",65),S.yc("click",function(){return e.onCancel()}),S.bd(116,"cancel"),S.nc(),S.nc(),S.nc(),S.oc(117,"mat-tab",66),S.Zc(118,kt,2,9,"div",67),S.nc(),S.oc(119,"mat-tab",68),S.oc(120,"div",19),S.oc(121,"app-send-mail",69),S.yc("sendEvent",function(t){return e.selectChange(t)}),S.nc(),S.nc(),S.nc(),S.nc(),S.oc(122,"div"),S.oc(123,"div",70),S.oc(124,"button",71,8),S.yc("mouseover",function(){return e.showDivWithHoverStyles(2)})("mouseout",function(){return e.showAllDivsWithDefaultStyles()}),S.Zc(126,Dt,2,0,"mat-icon",25),S.Zc(127,Ot,2,0,"mat-icon",25),S.nc(),S.oc(128,"button",72,8),S.yc("mouseover",function(){return e.showDivWithHoverStyles(2)})("mouseout",function(){return e.showAllDivsWithDefaultStyles()})("click",function(){return e.onPrintProduct()}),S.oc(130,"mat-icon"),S.bd(131,"dns"),S.nc(),S.nc(),S.oc(132,"button",73,8),S.yc("mouseover",function(){return e.showDivWithHoverStyles(2)})("mouseout",function(){return e.showAllDivsWithDefaultStyles()})("click",function(){return e.onConvertEstimate()}),S.oc(134,"mat-icon"),S.bd(135,"transform"),S.nc(),S.nc(),S.oc(136,"button",74,8),S.yc("mouseover",function(){return e.showDivWithHoverStyles(2)})("mouseout",function(){return e.showAllDivsWithDefaultStyles()})("click",function(){return e.onCopyEstimate()}),S.oc(138,"mat-icon"),S.bd(139,"filter_none"),S.nc(),S.nc(),S.oc(140,"button",75,8),S.yc("mouseover",function(){return e.showDivWithHoverStyles(2)})("mouseout",function(){return e.showAllDivsWithDefaultStyles()})("click",function(){return e.onDeleteEstimate()}),S.Zc(142,Pt,2,0,"mat-icon",25),S.Zc(143,At,2,0,"mat-icon",25),S.nc(),S.oc(144,"button",76,8),S.yc("mouseover",function(){return e.showDivWithHoverStyles(2)})("mouseout",function(){return e.showAllDivsWithDefaultStyles()})("click",function(){return e.saveNotification()}),S.oc(146,"mat-icon"),S.bd(147,"save"),S.nc(),S.nc(),S.oc(148,"button",77,8),S.yc("mouseover",function(){return e.showDivWithHoverStyles(2)})("mouseout",function(){return e.showAllDivsWithDefaultStyles()})("click",function(){return e.onCancel()}),S.oc(150,"mat-icon"),S.bd(151,"close"),S.nc(),S.nc(),S.nc(),S.nc(),S.nc()),2&t){const t=S.Rc(17),i=S.Rc(64);S.Vb(1),S.Jc("selectedIndex",e.selected.value),S.Vb(7),S.cd(e.vistaName),S.Vb(2),S.Jc("matTooltip",e.tooltipStatus),S.Vb(4),S.Jc("matMenuTriggerFor",t)("disabled",e.disableStatusList),S.Vb(1),S.dd(" ",e.estimate.status," "),S.Vb(3),S.Jc("ngForOf",e.statusList),S.Vb(4),S.Jc("formGroup",e.tileAndForm),S.Vb(9),S.Jc("formGroup",e.tileAndForm),S.Vb(3),S.Jc("ngIf",e.tileAndForm.controls.description.hasError("required")),S.Vb(7),S.Jc("ngIf",!e.clinetExist),S.Vb(1),S.Jc("ngIf",e.clinetExist),S.Vb(1),S.Jc("ngIf",e.clinetExist),S.Vb(6),S.Jc("formGroup",e.tileAndForm),S.Vb(12),S.Jc("matDatepicker",i),S.Vb(1),S.Jc("for",i),S.Vb(4),S.Jc("ngIf",e.estimate),S.Vb(9),S.dd(" ",e.servicesTotalOverhead," "),S.Vb(6),S.dd(" ",e.subcontractorsTotalProfit," "),S.Vb(6),S.dd(" ",e.billTotalOverhead," "),S.Vb(8),S.Jc("formGroup",e.inputForm),S.Vb(8),S.Jc("ngIf",e.inputForm.controls.totalCostWorkWithoutTaxes.hasError("required")),S.Vb(7),S.Jc("ngIf",e.inputForm.controls.totalCostWork.hasError("required")),S.Vb(7),S.Jc("disabled",e.disabledTab),S.Vb(1),S.Jc("ngIf",void 0!==e.estimate.idEstimate&&null!=e.estimate.idEstimate),S.Vb(1),S.Jc("disabled",e.disabledTab),S.Vb(2),S.Jc("estimatePojo",e.estimate)("emailHandyManTally",e.email),S.Vb(3),S.Jc("matTooltipPosition",e.position.value),S.Vb(2),S.Jc("ngIf",1===e.hoveredDivId),S.Vb(1),S.Jc("ngIf",2===e.hoveredDivId),S.Vb(1),S.Jc("ngClass",2===e.hoveredDivId?"btna":"btn")("matTooltipPosition",e.position.value),S.Vb(4),S.Jc("ngClass",2===e.hoveredDivId?"btna":"btn")("matTooltipPosition",e.position.value),S.Vb(4),S.Jc("ngClass",2===e.hoveredDivId?"btna":"btn")("matTooltipPosition",e.position.value),S.Vb(4),S.Jc("ngClass",2===e.hoveredDivId?"btna":"btn")("matTooltipPosition",e.position.value),S.Vb(2),S.Jc("ngIf",1===e.hoveredDivId),S.Vb(1),S.Jc("ngIf",2===e.hoveredDivId),S.Vb(1),S.Jc("ngClass",2===e.hoveredDivId?"btna":"btn")("matTooltipPosition",e.position.value),S.Vb(4),S.Jc("ngClass",2===e.hoveredDivId?"btna":"btn")("matTooltipPosition",e.position.value)}},directives:[M.b,M.a,I.a,J.a,W.a,F.d,F.a,o.m,r.v,r.n,r.g,r.c,r.m,r.f,r.t,_.c,N.b,o.n,r.r,j.b,j.d,_.h,j.a,Z.a,o.l,F.b,_.b,T.a,V.a,g.a,ut],styles:[".mac-card{max-width:100%}.ex-button-row a,.ex-button-row button{margin-right:8px}.cleanFlow{overflow:hidden}.flowRight{float:right}.viewWidth{width:100%;max-width:100%}.ex-chip-list{width:100%}.buttonEdid{background-color:#434b43;color:#fff}.buttonDelete{background-color:#ca0505;color:#fff}.mat-tab-header{color:#fff!important;min-width:20px!important;padding:4px;background-color:#f1ab28;font-weight:700;box-shadow:8px 8px 2px rgba(52,53,53,.521);font-size:50px}.tooltip-button{margin-top:16px}.tooltip-tooltip-red{background:#b71c1c}.tooltip-tooltip-yelon{background:#f5a510}.tooltip-tooltip-blue{background:#04579b}.tooltip-tooltip-purpe{background:#0e2aff}.tooltip-tooltip-green{background:#06af03}.green{background-color:green!important}.delete{background:#cc2b2b!important}.yellon{background-color:#b46937!important}.cont-re{display:flex;justify-content:center;align-items:center;flex-direction:column;height:55%;width:100%;border:6px solid #fff;background:#e5e5e5;box-shadow:-13px -13px 13px #fff,15px 15px 15px #0d275042,inset -13px -13px 13px #fff,inset 15px 15px 15px #0d275042;border-radius:30px;font-weight:700;font-family:sans-serif;color:#0c0701}.re{font-size:25px}.datos{font-size:18px;color:#0c9;font-family:Courier New,Courier,monospace}.contenedor{position:fixed;bottom:20px;right:20px;z-index:20}.botonF1{width:55px;height:55px;border-radius:100%;background:#f5a510;right:0;bottom:0;position:absolute;margin-right:16px;margin-bottom:16px;border:none;outline:none;color:#fff;font-size:36px;box-shadow:0 3px 6px #00000029,0 3px 6px #0000003b;transition:.3s}span{transition:.5s}.botonF1:hover span{transform:rotate(1turn)}.botonF1:active{transform:scale(1.1)}.btn{width:40px;height:40px;border-radius:100%;border:none;color:#fff;box-shadow:0 3px 6px #00000029,0 3px 6px #0000003b;font-size:28px;outline:none;position:absolute;right:0;bottom:0;margin-right:26px;transform:scale(0)}.botonF2{background:#04579b;margin-bottom:85px;transition:.5s}.botonF2:active{transform:scale(1.1)}.botonF3{background:#06af03;margin-bottom:130px;transition:.7s}.botonF3:active{transform:scale(1.1)}.botonF4{background:#0e2aff;margin-bottom:175px;transition:.9s}.botonF4:active{transform:scale(1.1)}.botonF5{background:#f13427;margin-bottom:220px;transition:.99s}.botonF5:active{transform:scale(1.1)}.botonF6{background:green;margin-bottom:265px;transition:.109s}.botonF6:active{transform:scale(1.1)}.botonF7{background:#e90808;margin-bottom:310px;transition:.109s}.botonF7:active{transform:scale(1.1)}.btna:hover{background:#fff!important;color:#cc2b2b!important}.btna{width:40px;height:40px;border-radius:100%;border:none;color:#fff;box-shadow:0 3px 6px #00000029,0 3px 6px #0000003b;font-size:28px;outline:none;position:absolute;right:0;bottom:0;margin-right:26px;transform:scale(1)}"],encapsulation:2});var It=i("M9IT"),Jt=i("Dh3D"),Wt=i("+0xr"),Ft=i("LvDl"),_t=i("u47x");function Nt(t,e){1&t&&(S.oc(0,"th",24),S.bd(1," ID "),S.nc())}function jt(t,e){if(1&t&&(S.oc(0,"td",25),S.bd(1),S.nc()),2&t){const t=e.$implicit;S.Vb(1),S.dd(" ",t.idEstimate," ")}}function Zt(t,e){1&t&&(S.oc(0,"th",26),S.bd(1," Name "),S.nc())}function Lt(t,e){if(1&t&&(S.oc(0,"td",25),S.bd(1),S.nc()),2&t){const t=e.$implicit;S.Vb(1),S.dd(" ",t.owner," ")}}function zt(t,e){1&t&&(S.oc(0,"th",27),S.bd(1,"Create Date "),S.nc())}function $t(t,e){if(1&t&&(S.oc(0,"td",25),S.bd(1),S.Dc(2,"date"),S.nc()),2&t){const t=e.$implicit;S.Vb(1),S.dd(" ",S.Fc(2,1,t.createDay,"dd/MM/yyyy"),"")}}function Bt(t,e){1&t&&(S.oc(0,"th",28),S.bd(1," Total Cost "),S.nc())}function Rt(t,e){if(1&t&&(S.oc(0,"td",25),S.bd(1),S.nc()),2&t){const t=e.$implicit;S.Vb(1),S.dd(" ",t.totalCostWork," ")}}function Ht(t,e){1&t&&(S.oc(0,"th",28),S.bd(1," Status "),S.nc())}function qt(t,e){if(1&t&&(S.oc(0,"td",29),S.bd(1),S.nc()),2&t){const t=e.$implicit;S.Vb(1),S.dd(" ",t.status," ")}}function Qt(t,e){1&t&&S.jc(0,"tr",30)}function Gt(t,e){if(1&t){const t=S.pc();S.oc(0,"tr",31),S.yc("click",function(){S.Tc(t);const i=e.$implicit;return S.Cc().onNavegateToDetail2(i)}),S.nc()}}function Ut(t,e){if(1&t&&(S.oc(0,"tr",32),S.oc(1,"td",33),S.bd(2),S.nc(),S.nc()),2&t){S.Cc();const t=S.Rc(11);S.Vb(2),S.dd('No data matching the filter "',t.value,'"')}}const Yt=function(){return[5,10,25,100]};class Kt{constructor(t,e,i,o,n){this.snackBar=t,this._liveAnnouncer=e,this.serviceEstimate=i,this.router=o,this.coreService=n,this.displayedColumns=["idEstimate","owner","createDay","totalCostWork","status"],this.dataSource2=new Wt.l,this.dataListEstimate=new Array,this.dataListEstimate2=new Array,this.title="Estimate",this.onGetData2()}ngOnInit(){this.serviceEstimate.em2.subscribe(t=>{this.dataListEstimate2=t,this.dataSource2.data=this.dataListEstimate2})}applyFilter(t){const e=t.target.value;this.dataSource2.filter=e.trim().toLowerCase()}decriptClienteInfo(){this.coreService.startClient().subscribe(t=>{})}onGetData2(){let t=new Array;this.serviceEstimate.getListEstimate().subscribe(e=>{t=e.entidades,t.forEach(t=>{t.totalCostWork=this.serviceEstimate.round(t.totalCostWork)}),this.serviceEstimate.updateEstimateList2(t)},t=>{this.snackBar.open("FAILL THE RESPONSE OFF SERVER","Cerrar")})}onNavegateToDetail2(t){this.router.navigate(["/jshandy-man-services/menu/estimate/edid-and-detail"],{queryParams:{id:t.idEstimate}})}onGetData(){let t=new Array;this.serviceEstimate.getAllEstimate().subscribe(e=>{t=e.entidades,t.forEach(t=>{t.createDay=new Date(t.createDay),t.owner=t.client.name,t.totalCostWork=this.serviceEstimate.round(t.totalCostWork),t.totalCostWorkWithoutTaxes=this.serviceEstimate.round(t.totalCostWorkWithoutTaxes)}),this.serviceEstimate.updateEstimateList(t)},t=>{this.snackBar.open("FAILL THE RESPONSE OFF SERVER","Cerrar")})}ngAfterViewInit(){this.dataSource2.paginator=this.paginator,this.dataSource2.sort=this.sort}announceSortChange(t){t.direction?this._liveAnnouncer.announce(`Sorted ${t.direction}ending`):this._liveAnnouncer.announce("Sorting cleared")}ngOnChanges(t){this.dataSource2.paginator=this.paginator,this.dataSource2.sort=this.sort}filterForselection(t,e){return Ft.differenceWith(t,e,Ft.isEqual)}onNavegateToDetail(t){this.router.navigate(["/jshandy-man-services/menu/estimate/edid-and-detail"],{queryParams:{id:t.idEstimate}})}onCreateNewEstimate(){this.router.navigateByUrl("/jshandy-man-services/menu/estimate/edid-and-detail")}applyDateFilter(){this.dataSource2.data=this.dataListEstimate}}Kt.\u0275fac=function(t){return new(t||Kt)(S.ic(O.a),S.ic(_t.k),S.ic(k.a),S.ic(a.c),S.ic(D.a))},Kt.\u0275cmp=S.cc({type:Kt,selectors:[["app-estimate"]],viewQuery:function(t,e){if(1&t&&(S.fd(Jt.a,3),S.fd(It.a,3)),2&t){let t;S.Qc(t=S.zc())&&(e.sort=t.first),S.Qc(t=S.zc())&&(e.paginator=t.first)}},features:[S.Tb],decls:33,vars:6,consts:[[1,"topeSeparation"],["for","title",1,"m-1","h3"],[1,"ex-button-row","mb-1","mt-1","flowRight"],["mat-fab","","color","primary",3,"click"],["appearance","standard"],["matInput","","placeholder","Ex. Mia",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource","matSortChange"],["matColumnDef","idEstimate"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by ID",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","owner"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by Name",4,"matHeaderCellDef"],["matColumnDef","createDay"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by Create Date",4,"matHeaderCellDef"],["matColumnDef","totalCostWork"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by Total Cost",4,"matHeaderCellDef"],["matColumnDef","status"],["mat-cell","","style","font-size: 12px;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by ID"],["mat-cell",""],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by Name"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by Create Date"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by Total Cost"],["mat-cell","",2,"font-size","12px"],["mat-header-row",""],["mat-row","",3,"click"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(t,e){1&t&&(S.oc(0,"div",0),S.oc(1,"header"),S.oc(2,"label",1),S.bd(3),S.nc(),S.nc(),S.oc(4,"div",2),S.oc(5,"button",3),S.yc("click",function(){return e.onCreateNewEstimate()}),S.bd(6,"New"),S.nc(),S.nc(),S.oc(7,"mat-form-field",4),S.oc(8,"mat-label"),S.bd(9,"Filter"),S.nc(),S.oc(10,"input",5,6),S.yc("keyup",function(t){return e.applyFilter(t)}),S.nc(),S.nc(),S.oc(12,"div",7),S.oc(13,"table",8),S.yc("matSortChange",function(t){return e.announceSortChange(t)}),S.mc(14,9),S.Zc(15,Nt,2,0,"th",10),S.Zc(16,jt,2,1,"td",11),S.lc(),S.mc(17,12),S.Zc(18,Zt,2,0,"th",13),S.Zc(19,Lt,2,1,"td",11),S.lc(),S.mc(20,14),S.Zc(21,zt,2,0,"th",15),S.Zc(22,$t,3,4,"td",11),S.lc(),S.mc(23,16),S.Zc(24,Bt,2,0,"th",17),S.Zc(25,Rt,2,1,"td",11),S.lc(),S.mc(26,18),S.Zc(27,Ht,2,0,"th",17),S.Zc(28,qt,2,1,"td",19),S.lc(),S.Zc(29,Qt,1,0,"tr",20),S.Zc(30,Gt,1,0,"tr",21),S.Zc(31,Ut,3,1,"tr",22),S.nc(),S.jc(32,"mat-paginator",23),S.nc(),S.nc()),2&t&&(S.Vb(3),S.cd(e.title),S.Vb(10),S.Jc("dataSource",e.dataSource2),S.Vb(16),S.Jc("matHeaderRowDef",e.displayedColumns),S.Vb(1),S.Jc("matRowDefColumns",e.displayedColumns),S.Vb(2),S.Jc("pageSizeOptions",S.Mc(5,Yt)))},directives:[W.a,_.c,_.g,N.b,Wt.k,Jt.a,Wt.c,Wt.e,Wt.b,Wt.g,Wt.j,Wt.h,It.a,Wt.d,Jt.b,Wt.a,Wt.f,Wt.i],pipes:[o.f],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-column-id[_ngcontent-%COMP%]{Word-wrap:break-Word!important;white-space:unset!important;flex:0 0 15%!important;width:10%!important;margin:0 0 0 10px;overflow-wrap:break-Word;Word-wrap:break-Word;Word-break:break-Word;-webkit-hyphens:auto;hyphens:auto}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:25%}.ex-button-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .ex-button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:8px}.cleanFlow[_ngcontent-%COMP%]{overflow:hidden}.flowRight[_ngcontent-%COMP%]{float:right}"]});const Xt=[{path:"list",component:Kt,children:[{path:"view",component:ut,canActivate:[s.a]}],canActivate:[s.a]},{path:"edid-and-detail",component:Mt,canActivate:[s.a]},{path:"new",component:Mt,canActivate:[s.a]}];class te{}te.\u0275fac=function(t){return new(t||te)},te.\u0275mod=S.gc({type:te}),te.\u0275inj=S.fc({imports:[[a.e.forChild(Xt)],a.e]});var ee=i("1kSV");class ie{}ie.\u0275fac=function(t){return new(t||ie)},ie.\u0275mod=S.gc({type:ie}),ie.\u0275inj=S.fc({providers:[s.a],imports:[[o.c,n.a,c.a,ee.b,te]]})}}]);